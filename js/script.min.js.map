{"version":3,"sources":["animation.js","bookmarks.js","deleting.js","file-view.js","menu-accy-attrs.js","menu-event.js","message.js","on-atom-click.js","on-error.js","server.js","tooltip.js","tree-building.js","upload-file.js","util.js","validation.js"],"names":["removeAnimeClass","$","removeClass","window","animation","animatedMessageAppearance","text","html","addClass","setTimeout","jQuery","bookmark","onBookmarkCloseClick","fileId","this","closest","attr","replace","fileName","hasClass","util","doYouWantToSave","viewAreaClose","onBookmarkClick","fileFullName","children","filter","noMarker","menuAccyAttrs","menuForFile","removeAttr","unbind","deleting","fileDeleting","val","filename","remove","trigger","menuEvents","closePopupDeletingFile","onSuccessFile","url","serverData","fileType","prepend","first","fileContent","click","one","onTextareaInput","onErrorFile","serverNoAnswer","onError","errorMessageShow","fileview","fileView","selectedFileId","dataUrl","server","download","menuForFolder","folderId","folderName","menuZeroState","prop","closePopupDeletingFolder","closePopupRenaming","closePopupCreation","keydown","evt","key","on","value","validation","folderNameValidation","fileNameValidation","onSuccessSubFolders","parentFolderId","after","i","length","hasOwnProperty","empty","append","iconUrl","fileIcon","css","fileDescription","onAtomClick","onFileClick","onFolderEmptyClick","onFolderClick","hover","tooltip","tooltipShow","tooltipHide","onErrorSubFolders","id","subFoldersUrl","textMessage","urlGet","onSuccess","xhr","XMLHttpRequest","responseType","open","addEventListener","status","response","timeout","send","upload","data","statusText","consts","URL_POST","coordX","pageX","offset","left","coordY","pageY","top","next","mousemove","onSuccessFirstFolders","folderID","onErrorFirstFolders","load","change","uploadedFile","files","uploadedFileName","name","reader","FileReader","readAsText","onload","target","result","keyup","onSaveButtonClick","console","log","fileNewCurrId","fileNewFullName","test"],"mappings":"CACA,WACA,aACA,SAAAA,IACAC,EAAA,4BAAAC,YAAA,sCASAC,OAAAC,UAAA,CACAC,0BARA,SAAAC,GACAL,EAAA,2BAAAM,KAAAD,GACAL,EAAA,4BAAAO,SAAA,sCAEAC,WAAAT,EAAA,QATA,CAgBAG,OAAAO,QChBA,WACA,aA0CAP,OAAAQ,SAAA,CACAC,qBAzCA,WAEA,IAAAC,EAAAZ,EAAAa,MAAAC,QAAA,oBAAAC,KAAA,MAAAC,QAAA,YAAA,IACAC,EAAAjB,EAAAa,MAAAC,QAAA,oBAAAR,OAGAN,EAAAa,MAAAC,QAAA,oBAAAI,SAAA,4BACAhB,OAAAiB,KAAAC,gBAAAR,EAAAK,GAEAf,OAAAiB,KAAAE,cAAAT,IAiCAU,gBA5BA,WACAtB,EAAA,oBAAAC,YAAA,4BACAD,EAAAa,MAAAN,SAAA,4BAEA,IAAAK,EAAAZ,EAAAa,MAAAE,KAAA,MAAAC,QAAA,YAAA,IACAO,EAAAvB,EAAAa,MAAAW,SAAA,QAAAlB,OAGAN,EAAA,uBAAAO,SAAA,aACAP,EAAA,uBAAAyB,OAAA,aAAAb,GAAAX,YAAA,aAEAC,OAAAiB,KAAAO,WACA1B,EAAA,qBAAAyB,OAAA,IAAAb,GAAAL,SAAA,sBAGAL,OAAAyB,cAAAC,YAAAhB,EAAAW,GAEAvB,EAAAa,MAAAK,SAAA,4BACAlB,EAAA,oBAAA6B,WAAA,aAGA7B,EAAA,oBAAAe,KAAA,WAAA,QACAf,EAAA,oBAAA8B,OAAA,OAvCA,CA+CA5B,OAAAO,QC9CA,WACA,aAmBAP,OAAA6B,SAAA,CACAC,aAnBA,WACA,IAAApB,EAAAZ,EAAA,wBAAAiC,MACAC,EAAAlC,EAAA,6BAAAM,OAGAN,EAAA,IAAAY,GAAAuB,SAEAjC,OAAAC,UAAAC,0BAAA,QAAA8B,EAAA,WAEAlC,EAAA,aAAAY,GAAAY,SAAA,oBAAAY,QAAA,SACAlC,OAAAmC,WAAAC,2BAZA,CAwBApC,OAAAO,QCvBA,WACA,aAEA,IAAA8B,EAAA,SAAAC,EAAAC,GACA,IAAAlB,EAAAkB,EAAAxB,SAAA,IAAAwB,EAAAC,SAIA1C,EAAA,6BAAAO,SAAA,aACAP,EAAA,oBAAAC,YAAA,4BAGAD,EAAA,oBAAA2C,QAAA,qEAAAF,EAAA7B,OAAA,WAAAW,EAAA,yDAGAvB,EAAA,IAAAyC,EAAA7B,QAAAX,YAAA,aAIAD,EAAA,uBAAAO,SAAA,aAEAP,EAAA,cAAA2C,QAAA,yDAAAF,EAAA7B,OAAA,iBACAZ,EAAA,uBAAA4C,QAAAX,IAAAQ,EAAAI,aAEA7C,EAAA,aAAAyC,EAAA7B,QAAAY,SAAA,oBAAAsB,MAAA5C,OAAAQ,SAAAC,sBACAX,EAAA,aAAAyC,EAAA7B,QAAAkC,MAAA5C,OAAAQ,SAAAY,iBACAtB,EAAA,aAAAyC,EAAA7B,QAAAmC,IAAA,QAAA7C,OAAAiB,KAAA6B,iBAGA9C,OAAAyB,cAAAC,YAAAa,EAAA7B,OAAAW,GAEAvB,EAAA,oBAAAe,KAAA,WAAA,SAGAkC,EAAA,SAAAT,EAAAU,GACAA,EACAhD,OAAAiD,QAAAC,iBAAAF,GAEAhD,OAAAiD,QAAAC,iBAAA,iCAGA,IAAAxC,EAAA4B,EAAAxB,QAAA,YAAA,IAAAA,QAAA,QAAA,IACAhB,EAAA,IAAAY,GAAAL,SAAA,aAEAP,EAAA,IAAAY,GAAAiB,WAAA,eACA7B,EAAA,oBAAAe,KAAA,WAAA,SAUAb,OAAAmD,SAAA,CACAC,SARA,SAAAC,GAEA,IAAAC,EAAA,YAAAD,EAAA,QAEArD,OAAAuD,OAAAC,SAAAF,EAAAjB,EAAAU,KApDA,CA0DA/C,OAAAO,QC5DA,WACA,aA0CAP,OAAAyB,cAAA,CACAC,YA1CA,SAAAhB,EAAAW,GAEAvB,EAAA,yBAAA6B,WAAA,YACA7B,EAAA,oBAAA6B,WAAA,YACA7B,EAAA,qBAAAe,KAAA,OAAA,SAAAQ,GACAvB,EAAA,qBAAAC,YAAA,6BAEAD,EAAA,2BAAAe,KAAA,WAAA,QAEAf,EAAA,6BAAAM,KAAAiB,GACAvB,EAAA,wBAAAiC,IAAArB,GACAZ,EAAA,wBAAAM,KAAAiB,IAgCAoC,cA7BA,SAAAC,EAAAC,GAEA7D,EAAA,oBAAA6B,WAAA,YACA7B,EAAA,2BAAA6B,WAAA,YAEA7B,EAAA,qBAAA6B,WAAA,QACA7B,EAAA,qBAAAO,SAAA,6BACAP,EAAA,yBAAAe,KAAA,WAAA,QAEAf,EAAA,+BAAAM,KAAAuD,GACA7D,EAAA,wBAAAM,KAAAuD,IAoBAC,cAjBA,WAEA9D,EAAA,yBAAA+D,KAAA,YAAA,GACA/D,EAAA,oBAAA+D,KAAA,YAAA,GACA/D,EAAA,qBAAA6B,WAAA,QACA7B,EAAA,qBAAAO,SAAA,6BACAP,EAAA,2BAAAe,KAAA,WAAA,QAEAf,EAAA,6BAAAM,KAAA,IACAN,EAAA,wBAAAiC,IAAA,IACAjC,EAAA,wBAAAM,KAAA,IACAN,EAAA,+BAAAM,KAAA,MAxCA,CAiDAJ,OAAAO,QCjDA,WACA,aAEA,SAAA6B,IACAtC,EAAA,kBAAAO,SAAA,aACAP,EAAA,mCAAA8B,SACA9B,EAAA,kCAAA8B,SAgBA,SAAAkC,IACAhE,EAAA,oBAAAO,SAAA,aACAP,EAAA,qCAAA8B,SACA9B,EAAA,oCAAA8B,SAgBA,SAAAmC,IACAjE,EAAA,aAAAO,SAAA,aAEAP,EAAA,oCAAAO,SAAA,aACAP,EAAA,8BAAAe,KAAA,WAAA,QACAf,EAAA,6BAAAiC,IAAA,IACAjC,EAAA,6BAAA8B,SACA9B,EAAA,6BAAA8B,SAiCA,SAAAoC,IACAlE,EAAA,aAAAO,SAAA,aACAP,EAAA,0BAAAO,SAAA,aACAP,EAAA,2BAAAe,KAAA,WAAA,QACAf,EAAA,0BAAAiC,IAAA,IACAjC,EAAA,4BAAA8B,OAAA,QAAAoC,GAiCAlE,EAAA,qBAAA8C,MA9BA,WACA9C,EAAA,aAAAC,YAAA,aACAD,EAAA,4BAAA8C,MAAAoB,GACAlE,EAAA,QAAAmE,QAAA,SAAAC,GACA,WAAAA,EAAAC,KACAH,MAGAlE,EAAA,0BAAAsE,GAAA,QAAA,WACAtE,EAAA,2BAAA6B,WAAA,YACA7B,EAAA,0BAAAO,SAAA,aACA,KAAAP,EAAAa,MAAAoB,OACAjC,EAAA,2BAAAe,KAAA,WAAA,UAGAf,EAAA,0BAAAsE,GAAA,SAAA,WACA,IAAAC,EAAAvE,EAAAa,MAAAoB,MACA/B,OAAAsE,WAAAC,qBAAAF,GAEAL,KAGAlE,EAAA,0BAAAM,KAAA,oCACAN,EAAA,0BAAAC,YAAA,kBAQAD,EAAA,qBAAA8C,MA5FA,WACA9C,EAAA,oBAAAC,YAAA,aACAD,EAAA,qCAAA8C,MAAAkB,GACAhE,EAAA,oCAAA8C,MAAAkB,GACAhE,EAAA,QAAAmE,QAAA,SAAAC,GACA,WAAAA,EAAAC,KACAL,QAuFAhE,EAAA,mBAAA8C,MAhHA,WACA9C,EAAA,kBAAAC,YAAA,aACAD,EAAA,mCAAA8C,MAAA5C,OAAA6B,SAAAC,cACAhC,EAAA,kCAAA8C,MAAAR,GACAtC,EAAA,QAAAmE,QAAA,SAAAC,GACA,WAAAA,EAAAC,KACA/B,QA2GAtC,EAAA,cAAA8C,MAvEA,WACA9C,EAAA,aAAAC,YAAA,aACAD,EAAA,6BAAA8C,MAAAmB,GACAjE,EAAA,QAAAmE,QAAA,SAAAC,GACA,WAAAA,EAAAC,KACAJ,MAGAjE,EAAA,6BAAAsE,GAAA,QAAA,WACAtE,EAAA,8BAAA6B,WAAA,YACA7B,EAAA,oCAAAO,SAAA,aACA,KAAAP,EAAAa,MAAAoB,OACAjC,EAAA,8BAAAe,KAAA,WAAA,UAGAf,EAAA,6BAAAsE,GAAA,SAAA,WACA,IAAAC,EAAAvE,EAAAa,MAAAoB,MACA/B,OAAAsE,WAAAE,mBAAAH,GAEAN,KAGAjE,EAAA,oCAAAM,KAAA,+BACAN,EAAA,oCAAAC,YAAA,kBAmDAC,OAAAmC,WAAA,CACAC,uBAAAA,GA9HA,CAiIApC,OAAAO,QC9HAP,OAAAO,OCJA,WACA,aAEA,SAAAkE,EAAAnC,EAAAC,GAEA,IAAAmC,EAAApC,EAAAxB,QAAA,iBAAA,IAAAA,QAAA,QAAA,IACAhB,EAAA,IAAA4E,GAAAC,MAAA,mBAAAD,EAAA,iCAEA,IAAA,IAAAE,EAAA,EAAAA,EAAArC,EAAAsC,OAAAD,IAEA,GAAArC,EAAAqC,GAAAE,eAAA,YAGA,SAAAvC,EAAAqC,GAAAG,MACAjF,EAAA,YAAA4E,GAAAM,OAAA,cAAAzC,EAAAqC,GAAAlB,SAAA,uCAAAnB,EAAAqC,GAAAjB,WAAA,aAEA7D,EAAA,YAAA4E,GAAAM,OAAA,cAAAzC,EAAAqC,GAAAlB,SAAA,2DAAAnB,EAAAqC,GAAAjB,WAAA,kBAGA,GAAApB,EAAAqC,GAAAE,eAAA,UAAA,CACAhF,EAAA,YAAA4E,GAAAM,OAAA,cAAAzC,EAAAqC,GAAAlE,OAAA,2CAAA6B,EAAAqC,GAAA7D,SAAA,IAAAwB,EAAAqC,GAAApC,SAAA,aACA,IAAAyC,EAAA,QAAA1C,EAAAqC,GAAAM,SAAA,KACApF,EAAA,IAAAyC,EAAAqC,GAAAlE,OAAA,SAAAyE,IAAA,mBAAAF,GACAnF,EAAA,IAAAyC,EAAAqC,GAAAlE,QAAAiE,MAAA,gDAAApC,EAAAqC,GAAAQ,gBAAA,aAEApF,OAAAiD,QAAAC,iBAAA,8BAIApD,EAAA,qBAAA8C,MAAA5C,OAAAqF,YAAAC,aACAxF,EAAA,8BAAA8C,MAAA5C,OAAAqF,YAAAE,oBAEAzF,EAAA,YAAA4E,EAAA,wBAAA9B,MAAA5C,OAAAqF,YAAAG,eACA1F,EAAA,qBAAA2F,MAAAzF,OAAA0F,QAAAC,YAAA3F,OAAA0F,QAAAE,aAGA,SAAAC,EAAAvD,EAAAU,GACAA,EACAhD,OAAAiD,QAAAC,iBAAAF,GAEAhD,OAAAiD,QAAAC,iBAAA,sDAmEAlD,OAAAqF,YAAA,CACAC,YApBA,WAEAtF,OAAAiB,KAAAO,WACA1B,EAAAa,MAAAN,SAAA,sBACA,IAAAK,EAAAZ,EAAAa,MAAAE,KAAA,MACAf,EAAAa,MAAAP,OAGAN,EAAAa,MAAAE,KAAA,eAOAf,EAAA,oBAAAyB,OAAA,aAAAb,GAAAwB,QAAA,UANApC,EAAAa,MAAAE,KAAA,cAAA,UAEAb,OAAAmD,SAAAC,SAAAzC,KAAAmF,MAUAP,mBAlCA,WAEAzF,EAAA,8BAAAC,YAAA,sBACAD,EAAA,uBAAAC,YAAA,sBACAD,EAAA,qBAAAC,YAAA,sBACAD,EAAAa,MAAAN,SAAA,sBACA,IAAAqD,EAAA5D,EAAAa,MAAAE,KAAA,MACA8C,EAAA7D,EAAAa,MAAAP,OAGAJ,OAAAyB,cAAAgC,cAAAC,EAAAC,IAyBA6B,cAlEA,WAEA1F,EAAA,uBAAAC,YAAA,sBACAD,EAAA,8BAAAC,YAAA,sBACAD,EAAA,qBAAAC,YAAA,sBACAD,EAAAa,MAAAN,SAAA,sBACA,IAAAqD,EAAA5D,EAAAa,MAAAE,KAAA,MACA8C,EAAA7D,EAAAa,MAAAP,OAKA,GAHAJ,OAAAyB,cAAAgC,cAAAC,EAAAC,GAGA7D,EAAAa,MAAAK,SAAA,8BAIA,GAHAlB,EAAAa,MAAAZ,YAAA,8BACAD,EAAAa,MAAAN,SAAA,8BAEAP,EAAA,cAAA4D,GAAAmB,OACA/E,EAAA,cAAA4D,GAAA3D,YAAA,iBACA,CAEA,IAAAgG,EAAA,iBAAAjG,EAAAa,MAAAE,KAAA,MAAA,QACAb,OAAAuD,OAAAC,SAAAuC,EAAAtB,EAAAoB,QAGA/F,EAAAa,MAAAZ,YAAA,8BACAD,EAAAa,MAAAN,SAAA,8BAEAP,EAAA,cAAA4D,GAAArD,SAAA,eAvEA,CAgHAL,OAAAO,QChHA,WACA,aAUAP,OAAAiD,QAAA,CACAC,iBATA,SAAA8C,GACAlG,EAAA,YAAAC,YAAA,aACAD,EAAA,0BAAAM,KAAA4F,GACAlG,EAAA,4BAAA8C,MAAA,WACA9C,EAAA,0BAAAM,KAAA,IACAN,EAAA,YAAAO,SAAA,iBARA,CAcAL,OAAAO,QCsCAP,OAAAuD,OAAA,CACAC,SAlDA,SAAAyC,EAAAC,EAAAjD,GACA,IAAAkD,EAAA,IAAAC,eAEAD,EAAAE,aAAA,OACAF,EAAAG,KAAA,MAAAL,GAEAE,EAAAI,iBAAA,OAAA,WACA,MAAAJ,EAAAK,OAEAN,EAAAD,EAAAE,EAAAM,UAGAxD,EAAAgD,EAAA,MAGAE,EAAAI,iBAAA,QAAA,WACAtD,EAAAgD,EAAA,iCAEAE,EAAAI,iBAAA,UAAA,WACAtD,EAAAgD,EAAA,kCAAAE,EAAAO,QAAA,IAAA,OAEAP,EAAAO,QAAA,IAEAP,EAAAQ,QA4BAC,OAzBA,SAAAC,EAAAX,EAAAjD,GACA,IAAAkD,EAAA,IAAAC,eACAD,EAAAE,aAAA,OAEAF,EAAAI,iBAAA,OAAA,WACA,MAAAJ,EAAAK,OACAN,IAEAjD,EAAA,kBAAAkD,EAAAK,OAAA,IAAAL,EAAAW,cAGAX,EAAAI,iBAAA,QAAA,WACAtD,MAEAkD,EAAAI,iBAAA,UAAA,WACAtD,MAEAkD,EAAAO,QAAA,IAEAP,EAAAG,KAAA,OAAAtG,OAAA+G,OAAAC,UACAb,EAAAQ,KAAAE,KChDA,WACA,aAwBA7G,OAAA0F,QAAA,CACAC,YAvBA,SAAAzB,GAEA,IAAA+C,EAAA/C,EAAAgD,MAAApH,EAAAa,MAAAwG,SAAAC,KACAC,EAAAnD,EAAAoD,MAAAxH,EAAAa,MAAAwG,SAAAI,IACAzH,EAAAa,MAAA6G,OAAArC,IAAA,CAAAoC,IAAAF,EAAAD,KAAAH,IACAnH,EAAAa,MAAA6G,OAAAzH,YAAA,aAQAD,EAAA,qBAAA2H,UALA,SAAAvD,GACA,IAAA+C,EAAA/C,EAAAgD,MAAApH,EAAAa,MAAAwG,SAAAC,KACAC,EAAAnD,EAAAoD,MAAAxH,EAAAa,MAAAwG,SAAAI,IACAzH,EAAAa,MAAA6G,OAAArC,IAAA,CAAAoC,IAAAF,EAAAD,KAAAH,OAaArB,YARA,WACA9F,EAAAa,MAAA6G,OAAAnH,SAAA,eApBA,CA8BAL,OAAAO,QC9BA,WACA,aAEA,SAAAmH,EAAApF,EAAAC,GACA,IAAA,IAAAqC,EAAA,EAAAA,EAAArC,EAAAsC,OAAAD,IAEA,SAAArC,EAAAqC,GAAAG,MACAjF,EAAA,eAAAkF,OAAA,cAAAzC,EAAAqC,GAAA+C,SAAA,uCAAApF,EAAAqC,GAAAjB,WAAA,aAEA7D,EAAA,eAAAkF,OAAA,cAAAzC,EAAAqC,GAAA+C,SAAA,2DAAApF,EAAAqC,GAAAjB,WAAA,aAGA7D,EAAA,uBAAA8C,MAAA5C,OAAAqF,YAAAG,eACA1F,EAAA,8BAAA8C,MAAA5C,OAAAqF,YAAAE,oBAGA,SAAAqC,EAAAtF,EAAAU,GACAA,EACAhD,OAAAiD,QAAAC,iBAAAF,GAEAhD,OAAAiD,QAAAC,iBAAA,kDAIApD,EAAAE,QAAA6H,KAAA,WAEA7H,OAAAuD,OAAAC,SADA,sBACAkE,EAAAE,KA1BA,CA6BA5H,OAAAO,QC7BA,WACA,aA0BAT,EAAA,gBAAAgI,OAxBA,WACA,IAAAC,EAAAjI,EAAAa,MAAA,GAAAqH,MAAA,GACAC,EAAAF,EAAAG,KAEAC,EAAA,IAAAC,WACAD,EAAAE,WAAAN,GACAI,EAAAG,OAAA,SAAApE,GACApE,EAAA,6BAAAO,SAAA,aACAP,EAAA,oBAAAC,YAAA,4BAEAD,EAAA,oBAAA2C,QAAA,gFAAAwF,EAAA,yDAEAnI,EAAA,uBAAAO,SAAA,aAEAP,EAAA,cAAA2C,QAAA,0EACA3C,EAAA,uBAAA4C,QAAAX,IAAAmC,EAAAqE,OAAAC,QAEA1I,EAAA,iBAAAwB,SAAA,oBAAAsB,MAAA5C,OAAAQ,SAAAC,sBACAX,EAAA,iBAAA8C,MAAA5C,OAAAQ,SAAAY,iBACAtB,EAAA,uBAAA2I,MAAAzI,OAAAiB,KAAA6B,oBAtBA,CA6BA9C,OAAAO,QC7BA,WACA,aAwGAP,OAAAiB,KAAA,CACAO,SAtGA,WACA1B,EAAA,qBAAAC,YAAA,sBACAD,EAAA,uBAAAC,YAAA,sBACAD,EAAA,8BAAAC,YAAA,uBAoGA+C,gBAjGA,WAEA,IAAAgD,EAAAhG,EAAAa,MAAAE,KAAA,MAAAC,QAAA,YAAA,IAEAhB,EAAA,oBAAAyB,OAAA,aAAAuE,GAAAzF,SAAA,4BAEAP,EAAA,oBAAA6B,WAAA,YACA7B,EAAA,oBAAA8C,MAAA5C,OAAAiB,KAAAyH,oBA2FAA,kBAxFA,WACA,IAAA3H,EAAAjB,EAAA,oBAAAyB,OAAA,6BAAAD,SAAA,QAAAlB,OACAN,EAAA,oBAAAyB,OAAA,6BAAAV,KAAA,MAAAC,QAAA,YAAA,IACAhB,EAAA,oBAAAyB,OAAA,6BAAAxB,YAAA,4BACAD,EAAA,oBAAAe,KAAA,WAAA,QACAf,EAAA,oBAAA8B,OAAA,IACA5B,OAAAC,UAAAC,0BAAA,QAAAa,EAAA,cAmFAG,gBAhFA,SAAAR,EAAAK,GACAjB,EAAA,2BAAAM,KAAA,QAAAW,EAAA,iBACAjB,EAAA,2BAAAM,KAAA,wBACAN,EAAA,mBAAAC,YAAA,aACAD,EAAA,yBAAA8C,MAAA,WACA9C,EAAA,mBAAAO,SAAA,aACAsI,QAAAC,IAAA,OACA9I,EAAA,yBAAA8B,OAAA,IACA9B,EAAA,wBAAA8B,OAAA,IACA9B,EAAA,yBAAA8B,OAAA,MAGA9B,EAAA,wBAAA8C,MAAA,WACA9C,EAAA,mBAAAO,SAAA,aACAsI,QAAAC,IAAA,MACA5I,OAAAiB,KAAAE,cAAAT,GACAZ,EAAA,yBAAA8B,OAAA,IACA9B,EAAA,wBAAA8B,OAAA,IACA9B,EAAA,yBAAA8B,OAAA,MAEA9B,EAAA,yBAAA8C,MAAA,WACA9C,EAAA,mBAAAO,SAAA,aACAsI,QAAAC,IAAA,OACA9I,EAAA,oBAAAoC,QAAA,SACAlC,OAAAiB,KAAAE,cAAAT,GACAZ,EAAA,yBAAA8B,OAAA,IACA9B,EAAA,wBAAA8B,OAAA,IACA9B,EAAA,yBAAA8B,OAAA,OAsDAT,cAnDA,SAAAT,GAUA,GATAiI,QAAAC,IAAA,iBAAAlI,GACAZ,EAAA,oBAAAyB,OAAA,aAAAb,GAAAuB,SAEAnC,EAAA,uBAAAyB,OAAA,aAAAb,GAAAuB,SAEAnC,EAAA,qBAAAyB,OAAA,IAAAb,GAAAiB,WAAA,eACA3B,OAAAiB,KAAAO,WAGA,GAAA1B,EAAA,oBAAA+E,OACA/E,EAAA,6BAAAC,YAAA,aACAD,EAAA,6BAAAC,YAAA,4BACAD,EAAA,oCAAAmC,SAEAnC,EAAA,uBAAAC,YAAA,aAEAC,OAAAyB,cAAAmC,gBAEA9D,EAAA,oBAAAe,KAAA,WAAA,QACAf,EAAA,oBAAA8B,OAAA,QACA,CAEA9B,EAAA,oBAAAC,YAAA,4BACAD,EAAA,oBAAA4C,QAAArC,SAAA,4BACA,IAAAwI,EAAA/I,EAAA,oBAAA4C,QAAA7B,KAAA,MAAAC,QAAA,YAAA,IACAgI,EAAAhJ,EAAA,oBAAA4C,QAAApB,SAAA,QAAAlB,OAEAN,EAAA,uBAAAO,SAAA,aAEAP,EAAA,uBAAAyB,OAAA,aAAAsH,GAAA9I,YAAA,aACAD,EAAA,qBAAAyB,OAAA,IAAAsH,GAAAxI,SAAA,sBAGAL,OAAAyB,cAAAC,YAAAmH,EAAAC,GACAhJ,EAAA,aAAAY,GAAAY,SAAA,oBAAAM,OAAA,IACA9B,EAAA,oBAAA4C,QAAA1B,SAAA,6BACAlB,EAAA,oBAAA6B,WAAA,YACA7B,EAAA,oBAAA8C,MAAA5C,OAAAiB,KAAAyH,qBAEA5I,EAAA,oBAAAe,KAAA,WAAA,QACAf,EAAA,oBAAA8B,OAAA,QApGA,CAgHA5B,OAAAO,QChHA,WACA,aAqBAP,OAAAsE,WAAA,CACAE,mBArBA,SAAA0D,GAGA,OADA,WACAa,KAAAb,IAmBA3D,qBAZA,SAAA2D,GAGA,OADA,WACAa,KAAAb,KAfA,CA2BAlI,OAAAO","file":"script.min.js","sourcesContent":["//показывает анимированное всплывающее сообщение\n+function () {\n  'use strict';\n  function removeAnimeClass () {\n    $('.animated-message__popup').removeClass('animated-message__popup--animation');\n  };\n  function animatedMessageAppearance (text) {\n    $('.animated-message__text').html(text);\n    $('.animated-message__popup').addClass('animated-message__popup--animation');\n    //обязательно снимать класс animated-message__popup--animation, иначе в след раз анимация не запустится\n    setTimeout(removeAnimeClass, 6500);\n  };\n\n  window.animation = {\n    animatedMessageAppearance: animatedMessageAppearance\n  };\n\n}(window.jQuery);\n","//обрабатывает клики на закладках, переключает и закрывает\n+function () {\n  'use strict';\n  //закрывашка для закладки\n  function onBookmarkCloseClick () {\n    //найходим id файла, соотв удаляемой закладке\n    var fileId = $(this).closest('.bookmarks__item').attr('id').replace('bookmark-', '');\n    var fileName = $(this).closest('.bookmarks__item').html();\n\n    //проверяем, был ли файл изменен\n    if ($(this).closest('.bookmarks__item').hasClass('bookmarks__item--changed')) {\n      window.util.doYouWantToSave (fileId, fileName);\n    } else {\n      window.util.viewAreaClose(fileId);\n    }\n  };\n//-------------------------------------------------------------------\n  //переключатель вкладок и textarea\n  function onBookmarkClick() {\n    $('.bookmarks__item').removeClass('bookmarks__item--current');\n    $(this).addClass('bookmarks__item--current');\n    //получаем id закладки без префикса\n    var fileId = $(this).attr('id').replace('bookmark-', '');\n    var fileFullName = $(this).children('span').html();\n\n    //находим среди textarea элемент с соотв id\n    $('.text-area textarea').addClass('to-delete');\n    $('.text-area textarea').filter('#textarea-' + fileId).removeClass('to-delete');\n\n    window.util.noMarker();\n    $('.tree__files-atom').filter('#' + fileId).addClass('tree__atom-current');\n\n    //формируем атрибуты пунктов меню\n    window.menuAccyAttrs.menuForFile(fileId, fileFullName);\n\n    if ($(this).hasClass('bookmarks__item--changed')) {\n      $('.viewing__button').removeAttr('disabled');\n      //$('.viewing__button').click(window.util.onSaveButtonClick);\n    } else {\n      $('.viewing__button').attr('disabled', 'true');\n      $('.viewing__button').unbind('');\n    }\n  };\n\n  window.bookmark = {\n    onBookmarkCloseClick: onBookmarkCloseClick,\n    onBookmarkClick: onBookmarkClick\n  };\n}(window.jQuery);\n","//обработка клика на \"удалить\" во всплывающем окне;\n//по правильному должен отправляться запрос на сервер с id удаляемого файла, поле удаления файла на сервере в браузер приходит подтверждение, и следом уходит запрос на обновление папки, содержащей этот файл. Как быть, если есть еще вложенные папки и файлы, и они были открыты - пока не знаю.\n+function () {\n  'use strict';\n  function fileDeleting () {\n    var fileId = $('.deleting-file input').val();\n    var filename = $('.deleting-file__text span').html();\n\n    //удаляем элемент в дереве\n    $('#' + fileId).remove(); //!!! будет работать только при условии, что коды файлов и папок не пересекаются!!!\n\n    window.animation.animatedMessageAppearance('Файл ' + filename + ' удален');\n    //удаляем закладку\n    $('#bookmark-' + fileId).children('.bookmark__close').trigger('click');\n    window.menuEvents.closePopupDeletingFile();\n  };\n\n  function folderDeleting () {\n    var folderId = $('.deleting-file input').val();\n    var foldername = $('.deleting-file__text span').html();\n  };\n\n  window.deleting = {\n    fileDeleting: fileDeleting\n  };\n\n}(window.jQuery);\n","//вызывается в обработчике кликов на файлах в дереве, проверяет, открыт файл или нет, если нет, то забирает с сервера  json и отображает содержимое в окне просмотра;\n//исключает повторный запрос на сервер, если файл уже открыт.\n\n+function () {\n  'use strict';\n\nvar onSuccessFile = function (url, serverData) {\n  var fileFullName = serverData.fileName + '.' + serverData.fileType;\n\n  //создаем закладку с именем файла\n  //скрываем bookmarks__item--zero и убираем класс current у всех элем-тов\n  $('.js-bookmarks__item--zero').addClass('to-delete');\n  $('.bookmarks__item').removeClass('bookmarks__item--current');\n  //создаем новый с id, который соотв файлу\n  var bookmarkCloseButton = '<button class=\"bookmark__close\"></button>';\n  $('.bookmarks__list').prepend('<li class=\"bookmarks__item bookmarks__item--current\" id=\"bookmark-' + serverData.fileId + '\"><span>' + fileFullName + '</span>' + bookmarkCloseButton + '</li>');\n\n  //возвращаем цвет шрифта в дереве в нормальный, он мог быть маркирован красным из-за ошибки\n  $('#' + serverData.fileId).removeClass('errorFile');\n\n  //отображение содержимого файла\n  //скрываем js-text-area--zero\n  $('.text-area textarea').addClass('to-delete');\n  //создаем textarea для открываемого  файла\n  $('.text-area').prepend('<textarea name=\"name\" rows=\"8\" cols=\"80\" id=\"textarea-' + serverData.fileId + '\"></textarea>');\n  $('.text-area textarea').first().val(serverData.fileContent);\n  //прослушки\n  $('#bookmark-' + serverData.fileId).children('.bookmark__close').click(window.bookmark.onBookmarkCloseClick);//прослушка для закрывашки\n  $('#bookmark-' + serverData.fileId).click(window.bookmark.onBookmarkClick);//прослушка для переключения\n  $('#textarea-' + serverData.fileId).one('input', window.util.onTextareaInput); //прослушка для изменения\n\n  //делаем доступными пункты меню для файлов\n  window.menuAccyAttrs.menuForFile(serverData.fileId, fileFullName);\n  //кнопку сохранить переводим в disabled\n  $('.viewing__button').attr('disabled', 'true');\n};\n\nvar onErrorFile = function (url, serverNoAnswer) {\n  if (serverNoAnswer) {\n    window.onError.errorMessageShow(serverNoAnswer);\n  } else {\n    window.onError.errorMessageShow('Содержимое файла не загружено');\n  }\n  //маркируем файл красным\n  var fileId = url.replace('../jsons/', '').replace('.json', '');\n  $('#' + fileId).addClass('errorFile');\n  //снимаем атрибут data-opened\n  $('#' + fileId).removeAttr('data-opened');\n  $('.viewing__button').attr('disabled', 'true');\n};\n\nfunction fileView (selectedFileId) {\n  //формируем адрес запроса в зависимости от выбранного файла\n  var dataUrl = '../jsons/' + selectedFileId + '.json';\n  //загружаем данные о файле с сервера, !!!пока статичные json-ы\n  window.server.download(dataUrl, onSuccessFile, onErrorFile);\n};\n\nwindow.fileview = {\n  fileView: fileView\n};\n}(window.jQuery);\n","//определяет доступность пунктов главного меню в зависимости от кликов на закладках и элементах дерева и формирует их параметры в зависимости от выбранного файла или папки\n+function () {\n  'use strict';\n  function menuForFile (fileId, fileFullName) {\n    //делаем доступными пункты меню для файлов\n    $('button.js-file-delete').removeAttr('disabled');\n    $('button.js-rename').removeAttr('disabled');\n    $('.js-file-download').attr('href', 'files/' + fileFullName);\n    $('.js-file-download').removeClass('main-menu__item--disabled');\n    //делаем недоступными пункты меню для папок\n    $('button.js-folder-delete').attr('disabled', 'true');\n    //формируем атрибуты всплывающих окон\n    $('.deleting-file__text span').html(fileFullName);\n    $('.deleting-file input').val(fileId);\n    $('.renaming__text span').html(fileFullName);\n  };\n\n  function menuForFolder (folderId, folderName) {\n    //делаем доступными пункты меню для папок\n    $('button.js-rename').removeAttr('disabled');\n    $('button.js-folder-delete').removeAttr('disabled');\n    //делаем недоступными пункты меню для файлов\n    $('.js-file-download').removeAttr('href');\n    $('.js-file-download').addClass('main-menu__item--disabled');\n    $('button.js-file-delete').attr('disabled', 'true');\n    //формируем атрибуты всплывающих окон\n    $('.deleting-folder__text span').html(folderName);\n    $('.renaming__text span').html(folderName);\n  };\n\n  function menuZeroState () {\n    //делаем недоступными пункты меню\n    $('button.js-file-delete').prop('disabled', true);\n    $('button.js-rename').prop('disabled', true);\n    $('.js-file-download').removeAttr('href');\n    $('.js-file-download').addClass('main-menu__item--disabled');\n    $('button.js-folder-delete').attr('disabled', 'true');\n    //очисщаем атрибуты всплывающих окон\n    $('.deleting-file__text span').html('');\n    $('.deleting-file input').val('');\n    $('.renaming__text span').html('');\n    $('.deleting-folder__text span').html('');\n  };\n\n  window.menuAccyAttrs = {\n    menuForFile: menuForFile,\n    menuForFolder: menuForFolder,\n    menuZeroState: menuZeroState\n  };\n\n  }(window.jQuery);\n","//обрабатываем нажатия на пункты меню, открываем всплывающие окна\n+function () {\n  'use strict';\n\nfunction closePopupDeletingFile () {\n  $('.deleting-file').addClass('to-delete');\n  $('.js-deleting-file__popup-button').unbind();\n  $('.js-deleting-file__popup-close').unbind();\n};\n\nfunction openPopupDeletingFile () {\n  $('.deleting-file').removeClass('to-delete');\n  $('.js-deleting-file__popup-button').click(window.deleting.fileDeleting);\n  $('.js-deleting-file__popup-close').click(closePopupDeletingFile);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupDeletingFile();\n    }\n  });\n};\n\n//----------------------------------------------------------\n\nfunction closePopupDeletingFolder () {\n  $('.deleting-folder').addClass('to-delete');\n  $('.js-deleting-folder__popup-button').unbind();\n  $('.js-deleting-folder__popup-close').unbind();\n};\n\nfunction openPopupDeletingFolder () {\n  $('.deleting-folder').removeClass('to-delete');\n  $('.js-deleting-folder__popup-button').click(closePopupDeletingFolder);\n  $('.js-deleting-folder__popup-close').click(closePopupDeletingFolder);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupDeletingFolder();\n    }\n  });\n};\n\n//----------------------------------------------------------\n\nfunction closePopupRenaming () {\n  $('.renaming').addClass('to-delete');\n  //очистка поля с именем файла/папки\n  $('.js-renaming__validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-renaming__popup-button').attr('disabled', 'true');//поставили disabled\n  $('.js-renaming__popup-input').val('');\n  $('.js-renaming__popup-close').unbind();\n  $('.js-renaming__popup-input').unbind();\n};\n\nfunction openPopupRenaming () {\n  $('.renaming').removeClass('to-delete');\n  $('.js-renaming__popup-close').click(closePopupRenaming);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupRenaming();\n    }\n  });\n  $('.js-renaming__popup-input').on('input',function() {\n    $('.js-renaming__popup-button').removeAttr('disabled');//убрали disabled\n    $('.js-renaming__validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-renaming__popup-button').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-renaming__popup-input').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.fileNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupRenaming();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-renaming__validation-message').html('имя должно быть на латинице');\n      $('.js-renaming__validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//---------------------------------------------------------------\n\nfunction closePopupCreation () {\n  $('.creation').addClass('to-delete');\n  $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n  $('.js-popup-input-create').val('');\n  $('.js-popup-close-creation').unbind('click', closePopupCreation);\n};\n\nfunction openPopupCreation () {\n  $('.creation').removeClass('to-delete');\n  $('.js-popup-close-creation').click(closePopupCreation);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupCreation();\n    }\n  });\n  $('.js-popup-input-create').on('input',function() {\n    $('.js-popup-button-create').removeAttr('disabled');//убрали disabled\n    $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-popup-input-create').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.folderNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupCreation();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-validation-message').html('не правильно, пишите на латинице');\n      $('.js-validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//----------------------------------------------------\n\n$('.js-folder-create').click(openPopupCreation);\n$('.js-folder-delete').click(openPopupDeletingFolder);\n$('.js-file-delete').click(openPopupDeletingFile);\n$('.js-rename').click(openPopupRenaming);\n\n\nwindow.menuEvents = {\n  closePopupDeletingFile: closePopupDeletingFile\n};\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n  //обработчики загрузки вложенного спииска с сервера\n  function onSuccessSubFolders (url, serverData) {\n    //выделяем id родительской папки из url\n    var parentFolderId = url.replace('../jsons/tree-', '').replace('.json', '');\n    $('#' + parentFolderId).after('<ul id=\"sublist-' + parentFolderId + '\" class=\"tree__sublist\"></ul>');\n    //запускаем цикл по массиву объектов;\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяем: папка или файл\n      if (serverData[i].hasOwnProperty('folderId')) {\n\n        //проверяем, пустая ли папка\n        if (serverData[i].empty == 'empty') {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n        } else {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n        }\n\n      } else if (serverData[i].hasOwnProperty('fileId')) {\n        $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].fileId + '\" class=\"tree__files-atom\"><span></span>' + serverData[i].fileName + '.' + serverData[i].fileType + '</p></li>');\n        var iconUrl = 'url(\"' + serverData[i].fileIcon + '\")';\n        $('#' + serverData[i].fileId + ' span').css('background-image', iconUrl);\n        $('#' + serverData[i].fileId).after('<p class=\"tree__files-description to-delete\">' + serverData[i].fileDescription + '</p>');\n      } else {\n        window.onError.errorMessageShow('загрузили непонятно что...');\n      }\n    }\n    //поставить соотв обработчики событий;\n    $('.tree__files-atom').click(window.onAtomClick.onFileClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n    //$('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('#sublist-' + parentFolderId + ' .tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__files-atom').hover(window.tooltip.tooltipShow, window.tooltip.tooltipHide);\n  };\n\n  function onErrorSubFolders (url, serverNoAnswer) {\n    if (serverNoAnswer) {\n      window.onError.errorMessageShow(serverNoAnswer);\n    } else {\n      window.onError.errorMessageShow('Ошибка загрузки данных о вложенных файлах и папках');\n    }\n  };\n\n  function onFolderClick () {//выполняется только для непустой папки\n    //маркируем\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n    var folderId = $(this).attr('id');\n    var folderName = $(this).html();\n    //делаем доступными пункты меню для папок\n    window.menuAccyAttrs.menuForFolder(folderId, folderName);\n\n    //проверяем, открыта папка или нет\n    if ( $(this).hasClass('tree__folders-atom--closed') ) {\n      $(this).removeClass('tree__folders-atom--closed');\n      $(this).addClass('tree__folders-atom--opened');\n        //проверяем, были ли уже данные загружены = есть ли соседний ul с классом  tree__sublist\n        if ( $('ul#sublist-' + folderId ).length ) {\n          $('ul#sublist-' + folderId ).removeClass('to-delete');\n        } else {\n          //запрашваем данные с сервера\n          var subFoldersUrl = '../jsons/tree-' + $(this).attr('id') + '.json';\n          window.server.download(subFoldersUrl, onSuccessSubFolders, onErrorSubFolders);\n        }\n    } else {\n      $(this).removeClass('tree__folders-atom--opened');\n      $(this).addClass('tree__folders-atom--closed');\n      //скрываем подсписок\n      $('ul#sublist-' + folderId).addClass('to-delete');\n    }\n  };\n\n  function onFolderEmptyClick () {\n    //только маркируем элемент\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n    var folderId = $(this).attr('id');\n    var folderName = $(this).html();\n//менять значок на открытую папку или нет????\n    //делаем доступными пункты меню для папок\n    window.menuAccyAttrs.menuForFolder(folderId, folderName);\n  };\n\n  function onFileClick () {\n    //маркируем строку с именем файла в дереве\n    window.util.noMarker();\n    $(this).addClass('tree__atom-current');\n    var fileId = $(this).attr('id');\n    var fileName = $(this).html();\n\n    //проверяем: открыт файл или нет;\n    if ( !$(this).attr('data-opened') ) {\n      $(this).attr('data-opened', 'opened');\n      //если нет, вызываем функцию отображения содержимого файла\n      window.fileview.fileView(this.id);\n    } else {\n      //если открыт, то переключаем вкладки\n      //находим закладку соотв файлу в дереве и отдаем ее в\n      $('.bookmarks__item').filter('#bookmark-' + fileId).trigger('click');\n    }\n  };\n\n  window.onAtomClick = {\n    onFileClick: onFileClick,\n    onFolderEmptyClick: onFolderEmptyClick,\n    onFolderClick: onFolderClick\n  };\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n  function errorMessageShow (textMessage) {\n    $('.message').removeClass('to-delete');\n    $('.message__dynamic-text').html(textMessage);\n    $('.js-popup-button-message').click(function () {\n      $('.message__dynamic-text').html('');\n      $('.message').addClass('to-delete');\n    });\n  };\n  window.onError = {\n    errorMessageShow: errorMessageShow\n  };\n}(window.jQuery);\n","'use strict';\n\n(function () {\n  var download = function (urlGet, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.responseType = 'json'; // !!!\n    xhr.open('GET', urlGet);\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        //console.log('xhr.status' + xhr.status);\n        onSuccess(urlGet, xhr.response);\n      } else {\n        //onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n        onError(urlGet, '');\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError(urlGet, 'Произошла ошибка соединения');\n    });\n    xhr.addEventListener('timeout', function () {\n      onError(urlGet, 'Запрос не успел выполниться за ' + xhr.timeout / 1000 + 'с');\n    });\n    xhr.timeout = 4000;\n\n    xhr.send();\n  };\n\n  var upload = function (data, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'json';\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        onSuccess();\n      } else {\n        onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError();\n    });\n    xhr.addEventListener('timeout', function () {\n      onError();\n    });\n    xhr.timeout = 4000;\n\n    xhr.open('POST', window.consts.URL_POST);\n    xhr.send(data);\n  };\n\n  window.server = {\n    download: download,\n    upload: upload\n  };\n})();\n","//открывает всплывающие подсказки к файлам\n+function () {\n  'use strict';\n\n  function tooltipShow(evt) {\n    //позиционируем: получаем координаты мыши внутри files-tree__atom, задаем значения top и left для подсказки\n    var coordX = evt.pageX - $(this).offset().left;\n    var coordY = evt.pageY - $(this).offset().top;\n    $(this).next().css({'top': coordY, 'left': coordX});\n    $(this).next().removeClass('to-delete');\n\n    //перемещаем подсказку при движении мыши в пределах элемента\n    function tooltipMove (evt) {\n      var coordX = evt.pageX - $(this).offset().left;\n      var coordY = evt.pageY - $(this).offset().top;\n      $(this).next().css({'top': coordY, 'left': coordX});\n    };\n    $('.tree__files-atom').mousemove(tooltipMove);\n  };\n\n  function tooltipHide() {\n    $(this).next().addClass('to-delete');\n  };\n\n  //$('.tree__files-atom').hover(tooltipShow, tooltipHide);\n\n  window.tooltip = {\n    tooltipShow: tooltipShow,\n    tooltipHide: tooltipHide\n  };\n\n}(window.jQuery);\n","//построение списка папок первого уровня; допущение: файлов нет;\n+function () {\n  'use strict';\n\n  function onSuccessFirstFolders (url, serverData) {\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяeм на основе данных из БД по свойству empty: пустая папка или нет; даем соотв-й класс(ы)\n      if (serverData[i].empty == 'empty') {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n      } else {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n      }\n    }\n    $('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n  };\n\n  function onErrorFirstFolders (url, serverNoAnswer) {\n    if (serverNoAnswer) {\n      window.onError.errorMessageShow(serverNoAnswer);\n    } else {\n      window.onError.errorMessageShow('Ошибка загрузки данных о папках первого уровня');\n    }\n  };\n\n  $(window).load(function () {\n    var treeUrl = '../jsons/tree0.json';\n    window.server.download(treeUrl, onSuccessFirstFolders, onErrorFirstFolders);\n  });\n\n}(window.jQuery);\n","//открываем окно выбора файла, скачиваем файл, отображаем его содержимое\n+function () {\n  'use strict';\n\n  function onUploaded () {\n    var uploadedFile = $(this)[0].files[0];\n    var uploadedFileName = uploadedFile.name;\n\n    var reader = new FileReader();\n    reader.readAsText(uploadedFile);\n    reader.onload = function(evt) {\n      $('.js-bookmarks__item--zero').addClass('to-delete');\n      $('.bookmarks__item').removeClass('bookmarks__item--current');\n      var bookmarkCloseButton = '<button class=\"bookmark__close\"></button>';\n      $('.bookmarks__list').prepend('<li class=\"bookmarks__item bookmarks__item--current\" id=\"bookmark-new\"><span>' + uploadedFileName + '</span>' + bookmarkCloseButton + '</li>');\n      //отображение содержимого файла\n      $('.text-area textarea').addClass('to-delete');\n      //создаем textarea для открываемого  файла\n      $('.text-area').prepend('<textarea id=\"textarea-new\" name=\"name\" rows=\"8\" cols=\"80\"></textarea>');\n      $('.text-area textarea').first().val(evt.target.result);\n      //прослушки\n      $('#bookmark-new').children('.bookmark__close').click(window.bookmark.onBookmarkCloseClick);//прослушка для закрывашки\n      $('#bookmark-new').click(window.bookmark.onBookmarkClick);//прослушка для переключения\n      $('.text-area textarea').keyup(window.util.onTextareaInput); //прослушка для изменения\n    };\n  };\n\n  //обрабатываем событие change после выбора файла\n  $('#upload-file').change(onUploaded);\n\n}(window.jQuery);\n","//утилитарные функции для всякого\n+function () {\n  'use strict';\n\n  //сбрасывает маркеры со всех элементов дерева\n  function noMarker () {\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n  };\n\n  function onTextareaInput () {\n    //получить id из this\n    var id = $(this).attr('id').replace('textarea-', '');\n    //по id найти соотв закладку и дать ей класс --changed\n    $('.bookmarks__item').filter('#bookmark-' + id).addClass('bookmarks__item--changed');\n    //снять disabled с кнопки\n    $('.viewing__button').removeAttr('disabled');\n    $('.viewing__button').click(window.util.onSaveButtonClick);\n  };\n\n  function onSaveButtonClick () {\n    var fileName = $('.bookmarks__item').filter('.bookmarks__item--current').children('span').html();\n    var fileId = $('.bookmarks__item').filter('.bookmarks__item--current').attr('id').replace('bookmark-', '');\n    $('.bookmarks__item').filter('.bookmarks__item--current').removeClass('bookmarks__item--changed');\n    $('.viewing__button').attr('disabled', 'true');\n    $('.viewing__button').unbind('');\n    window.animation.animatedMessageAppearance ('файл ' + fileName + ' сохранен');\n  };\n\n  function doYouWantToSave (fileId, fileName) {\n    $('.message-tosave__text-1').html('Файл ' + fileName + ' был изменен.');\n    $('.message-tosave__text-2').html('Сохранить изменения?');\n    $('.message-tosave').removeClass('to-delete');\n    $('.js-tosave-button-esc').click(function () {\n      $('.message-tosave').addClass('to-delete');\n      console.log('esc');\n      $('.js-tosave-button-esc').unbind('');\n      $('.js-tosave-button-no').unbind('');\n      $('.js-tosave-button-yes').unbind('');\n      return;\n    });\n    $('.js-tosave-button-no').click(function () {\n      $('.message-tosave').addClass('to-delete');\n      console.log('no');\n      window.util.viewAreaClose(fileId);\n      $('.js-tosave-button-esc').unbind('');\n      $('.js-tosave-button-no').unbind('');\n      $('.js-tosave-button-yes').unbind('');\n    });\n    $('.js-tosave-button-yes').click(function () {\n      $('.message-tosave').addClass('to-delete');\n      console.log('yes');\n      $('.viewing__button').trigger('click');\n      window.util.viewAreaClose(fileId);\n      $('.js-tosave-button-esc').unbind('');\n      $('.js-tosave-button-no').unbind('');\n      $('.js-tosave-button-yes').unbind('');\n    });\n  };\n  function viewAreaClose (fileId) {\n    console.log('viewAreaClose ' + fileId);\n    $('.bookmarks__item').filter('#bookmark-' + fileId).remove();\n    //по id найходим textarea и удаляем его\n    $('.text-area textarea').filter('#textarea-' + fileId).remove();\n    //по id найходим элемент в дереве файлов и снимаем атрибут data-open\n    $('.tree__files-atom').filter('#' + fileId).removeAttr('data-opened');\n    window.util.noMarker();\n\n    //если удаляем последнюю закладку, то восстанавливаем bookmarks__item--zero и js-text-area--zero и прочее\n    if ($('.bookmarks__item').length == 1) {\n      $('.js-bookmarks__item--zero').removeClass('to-delete');\n      $('.js-bookmarks__item--zero').removeClass('bookmarks__item--current');\n      $('.js-bookmarks__item--zero button').remove();\n      //восстановливаем js-text-area--zero\n      $('.js-text-area--zero').removeClass('to-delete');\n      //делаем недоступными пункты меню\n      window.menuAccyAttrs.menuZeroState();\n      //кнопку сохранить переводим в disabled\n      $('.viewing__button').attr('disabled', 'true');\n      $('.viewing__button').unbind('');\n    } else {\n      //находим первую закладку в наборе и даем ей current\n      $('.bookmarks__item').removeClass('bookmarks__item--current');\n      $('.bookmarks__item').first().addClass('bookmarks__item--current');\n      var fileNewCurrId = $('.bookmarks__item').first().attr('id').replace('bookmark-', '');\n      var fileNewFullName = $('.bookmarks__item').first().children('span').html();\n\n      $('.text-area textarea').addClass('to-delete');\n      //находим по id соответствующий textarea и отображаем его\n      $('.text-area textarea').filter('#textarea-' + fileNewCurrId).removeClass('to-delete');\n      $('.tree__files-atom').filter('#' + fileNewCurrId).addClass('tree__atom-current');\n\n      //формируем атрибуты пунктов меню\n      window.menuAccyAttrs.menuForFile(fileNewCurrId, fileNewFullName);\n      $('#bookmark-' + fileId).children('.bookmark__close').unbind('');\n      if ($('.bookmarks__item').first().hasClass('bookmarks__item--changed')) {\n        $('.viewing__button').removeAttr('disabled');\n        $('.viewing__button').click(window.util.onSaveButtonClick);\n      } else {\n        $('.viewing__button').attr('disabled', 'true');\n        $('.viewing__button').unbind('');\n      }\n    }\n  };\n\n  window.util = {\n    noMarker: noMarker,\n    onTextareaInput: onTextareaInput,\n    onSaveButtonClick: onSaveButtonClick,\n    doYouWantToSave: doYouWantToSave,\n    viewAreaClose: viewAreaClose\n  };\n}(window.jQuery);\n","//валидация значений во всплывающих окнах; для имен файлов и папок\n+function () {\n  'use strict';\n  function fileNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters =  /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  function folderNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters = /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  window.validation = {\n    fileNameValidation: fileNameValidation,\n    folderNameValidation: folderNameValidation\n  };\n\n}(window.jQuery);\n"]}