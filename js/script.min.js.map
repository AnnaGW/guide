{"version":3,"sources":["a-server.js","bookmarks-toggle.js","file-tree-building.js","file-view.js","menu-event.js","message.js","on-atom-click.js","on-error.js","tooltip.js","upload-file.js","validation.js"],"names":["window","server","download","urlGet","onSuccess","onError","xhr","XMLHttpRequest","responseType","open","addEventListener","status","response","statusText","timeout","send","upload","data","consts","URL_POST","viewFileClose","bookmarkId","$","this","closest","attr","replace","remove","filter","removeAttr","removeClass","length","prop","addClass","first","bookmarkNewCurrId","viewFileToggle","bookmark","bookmarkClose","click","bookmarkToggle","jQuery","onSuccessFirstFolders","url","serverData","i","empty","append","folderID","folderName","onAtomClick","onFolderClick","onFolderEmptyClick","onErrorFirstFolders","errorMessageShow","load","onSuccessFile","fileFullName","fileName","fileType","prepend","fileId","val","fileContent","html","onErrorFile","fileview","fileView","selectedFile","dataUrl","id","closePopupDeleting","unbind","openPopupDeleting","keydown","evt","key","closePopupRenaming","closePopupCreation","on","value","validation","folderNameValidation","fileNameValidation","onSuccessSubFolders","parentFolderId","after","hasOwnProperty","folderId","iconUrl","fileIcon","css","fileDescription","onFileClick","hover","tooltip","tooltipShow","tooltipHide","onErrorSubFolders","hasClass","subFoldersUrl","textMessage","console","log","coordX","pageX","offset","left","coordY","pageY","top","next","mousemove","change","reader","FileReader","onload","e","target","result","readAsText","files","name","test"],"mappings":"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","file":"script.min.js","sourcesContent":["'use strict';\n\n(function () {\n  var download = function (urlGet, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.responseType = 'json'; // !!!\n    xhr.open('GET', urlGet);\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        //console.log('xhr.status' + xhr.status);\n        onSuccess(urlGet, xhr.response);\n      } else {\n        onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError('Произошла ошибка соединения');\n    });\n    xhr.addEventListener('timeout', function () {\n      onError('Запрос не успел выполниться за ' + xhr.timeout / 1000 + 'с');\n    });\n    xhr.timeout = 4000;\n\n    xhr.send();\n  };\n\n  var upload = function (data, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'json';\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        onSuccess();\n      } else {\n        onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError();\n    });\n    xhr.addEventListener('timeout', function () {\n      onError();\n    });\n    xhr.timeout = 4000;\n\n    xhr.open('POST', window.consts.URL_POST);\n    xhr.send(data);\n  };\n\n  window.server = {\n    download: download,\n    upload: upload\n  };\n})();\n","+function () {\n  'use strict';\n  //закрывашка для закладки\n  function viewFileClose() { //удаляет закладку и область просмотра,\n    //найходим id удаляемой закладки-родителя\n    var bookmarkId = $(this).closest('.bookmarks__item').attr('id').replace('bookmark-', '');\n    $(this).closest('.bookmarks__item').remove();\n\n    //по id найходим textarea и удаляем его\n    $('.text-area textarea').filter('#textarea-' + bookmarkId).remove();\n    //по нему найходим элемент в дереве файлов и снимаем атрибут data-open\n    $('.tree__files-atom').filter('#' + bookmarkId).removeAttr('data-opened');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n\n    //если удаляем последнюю закладку, то восстанавливаем bookmarks__item--zero и js-text-area--zero и прочее\n    if ($('.bookmarks__item').length == 1) {\n      $('.js-bookmarks__item--zero').removeClass('to-delete');\n      $('.js-bookmarks__item--zero').removeClass('bookmarks__item--current');\n      $('.js-bookmarks__item--zero button').remove();\n      //восстановливаем js-text-area--zero\n      $('.js-text-area--zero').removeClass('to-delete');\n      //делаем недоступными пункты меню\n      $('button.js-file-delete').prop('disabled', true);\n      $('button.js-rename').prop('disabled', true);\n      //$('.js-file-upload').addClass('main-menu__item--disabled');\n      $('.js-file-download').removeAttr('href');\n      $('.js-file-download').addClass('main-menu__item--disabled');\n    } else {\n      //находим первую закладку в наборе и даем ей current\n      $('.bookmarks__item').first().addClass('bookmarks__item--current');\n      var bookmarkNewCurrId = $('.bookmarks__item').first().attr('id').replace('bookmark-', '');\n      //находим первый textarea и отображаем его, правильнее находить по id!!!\n      $('.text-area textarea').first().removeClass('to-delete');\n      $('.tree__files-atom').filter('#' + bookmarkNewCurrId).addClass('tree__atom-current');\n    }\n  };\n\n  function bookmarkClose() {\n    $('.bookmark__close').click(viewFileClose);\n  };\n//-------------------------------------------------------------------\n  //переключатель вкладок и textarea\n  function viewFileToggle() {\n    $('.bookmarks__item').removeClass('bookmarks__item--current');\n    $(this).addClass('bookmarks__item--current');\n    //получаем id закладки без префикса\n    var bookmarkId = $(this).attr('id').replace('bookmark-', '');\n\n    //находим среди textarea элемент с соотв id\n    $('.text-area textarea').addClass('to-delete');\n    $('.text-area textarea').filter('#textarea-' + bookmarkId).removeClass('to-delete');\n\n    //находим среди files-tree__atom элемент с соотв id маркируем его\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').filter('#' + bookmarkId).addClass('tree__atom-current');\n  };\n\n\n  function bookmarkToggle() {\n    $('.bookmarks__item').click(viewFileToggle); //?? приоритет с bookmark__close???\n  };\n\n\n  window.bookmark = {\n    bookmarkClose: bookmarkClose,\n    bookmarkToggle: bookmarkToggle\n  };\n}(window.jQuery);\n","//построение списка папок первого уровня; допущение: файлов нет;\n+function () {\n  'use strict';\n\n  function onSuccessFirstFolders (url, serverData) {\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяeм на основе данных из БД по свойству empty: пустая папка или нет; даем соотв-й класс(ы)\n      if (serverData[i].empty == 'empty') {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n\n      } else {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n      }\n    }\n    $('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n  };\n\n  function onErrorFirstFolders () {\n    window.onError.errorMessageShow('Ошибка загрузки данных о папках первого уровня');\n  };\n\n  $(window).load(function () {\n    var treeUrl = '../jsons/tree0.json';\n    window.server.download(treeUrl, onSuccessFirstFolders, onErrorFirstFolders);\n  });\n\n}(window.jQuery);\n","//обрабатывает клики на файлах в дереве, проверяет, открыт файл или нет, если нет, то забирает с сервера  json и отображает содержимое в окне просмотра; исключает повторный запрос на сервер, если файл уже открыт.\n//Делает доступными пункты меню для работы с файлами, формирует их атрибуты в зависимости от выбранного файла\n\n+function () {\n  'use strict';\n\nvar onSuccessFile = function (url, serverData) {\n  //создаем закладку с именем файла\n  //формируем содержимое закладки\n  var fileFullName = serverData.fileName + '.' + serverData.fileType;\n  //скрываем bookmarks__item--zero и убираем класс current у всех элем-тов\n  $('.js-bookmarks__item--zero').addClass('to-delete');\n  $('.bookmarks__item').removeClass('bookmarks__item--current');\n  //создаем новый  с id, который соотв файлу\n  var bookmarkCloseButton = '<button class=\"bookmark__close\"></button>';\n  $('.bookmarks__list').prepend('<li class=\"bookmarks__item bookmarks__item--current\" id=\"bookmark-' + serverData.fileId + '\"><span>' + fileFullName + '</span>' + bookmarkCloseButton + '</li>');\n  //$('.bookmarks__item span').after('<button class=\"bookmark__close\"></button>');\n  window.bookmark.bookmarkClose();//прослушка для закрывашки\n\n  //отображение содержимого файла\n  //скрываем js-text-area--zero\n  $('.text-area textarea').addClass('to-delete');\n  //создаем textarea для открываемого  файла\n  $('.text-area').prepend('<textarea name=\"name\" rows=\"8\" cols=\"80\" id=\"textarea-' + serverData.fileId + '\"></textarea>');\n  $('.text-area textarea').first().val(serverData.fileContent);\n  window.bookmark.bookmarkToggle();//прослушка для переключения\n\n  //делаем доступными пункты меню\n  $('button.js-file-delete').removeAttr('disabled');\n  $('button.js-rename').removeAttr('disabled');\n  $('button.js-js-folder-delete').removeAttr('disabled');\n  $('.js-file-upload').removeClass('main-menu__item--disabled');\n  $('.js-file-download').removeClass('main-menu__item--disabled');\n\n  //формируем атрибуты пунктов меню\n  $('.deleting__text span').html(fileFullName);\n  $('.renaming__text span').html(fileFullName);\n  $('.main-menu__download').attr('href', 'files/' + fileFullName);\n};\n\nvar onErrorFile = function () {\n  window.onError.errorMessageShow('Содержимое файла не загружено');\n};\n\nfunction fileView (selectedFile) {\n  //формируем адрес запроса в зависимости от выбранного файла\n  var dataUrl = '../jsons/' + selectedFile.id + '.json';\n  //загружаем данные о файле с сервера, !!!пока статичные json-ы\n  window.server.download(dataUrl, onSuccessFile, onErrorFile);\n};\n\nwindow.fileview = {\n  fileView: fileView\n};\n}(window.jQuery);\n","//обрабатываем нажатия на пункты меню, открываем всплывающие окна\n+function () {\n  'use strict';\n\nfunction closePopupDeleting () {\n  $('.deleting').addClass('to-delete');\n\n  //очистка поля с именем файла/папки\n  $('.js-popup-close-deleting').unbind('click', closePopupDeleting);\n};\n\nfunction openPopupDeleting () {\n  $('.deleting').removeClass('to-delete');\n  $('.js-popup-close-deleting').click(closePopupDeleting);\n  $('.js-popup-button-delete').click(closePopupDeleting);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupDeleting();\n    }\n  });\n};\n\n//----------------------------------------------------------\n\nfunction closePopupRenaming () {\n  $('.renaming').addClass('to-delete');\n  //очистка поля с именем файла/папки\n  $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-popup-button-rename').attr('disabled', 'true');//поставили disabled\n  $('.js-popup-input-rename').val('');\n  $('.js-popup-close-renaming').unbind('click', closePopupRenaming);\n};\n\nfunction openPopupRenaming () {\n  $('.renaming').removeClass('to-delete');\n  $('.js-popup-close-renaming').click(closePopupRenaming);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupRenaming();\n    }\n  });\n  $('.js-popup-input-rename').on('input',function() {\n    $('.js-popup-button-rename').removeAttr('disabled');//убрали disabled\n    $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-popup-button-rename').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-popup-input-rename').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.fileNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupRenaming();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-validation-message').html('имя должно быть на латинице');\n      $('.js-validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//---------------------------------------------------------------\n\nfunction closePopupCreation () {\n  $('.creation').addClass('to-delete');\n  $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n  $('.js-popup-input-create').val('');\n  $('.js-popup-close-creation').unbind('click', closePopupCreation);\n};\n\nfunction openPopupCreation () {\n  $('.creation').removeClass('to-delete');\n  $('.js-popup-close-creation').click(closePopupCreation);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupCreation();\n    }\n  });\n  $('.js-popup-input-create').on('input',function() {\n    $('.js-popup-button-create').removeAttr('disabled');//убрали disabled\n    $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-popup-input-create').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.folderNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupCreation();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-validation-message').html('не правильно, пишите на латинице');\n      $('.js-validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//----------------------------------------------------\n\n$('.js-folder-create').click(openPopupCreation);\n$('.js-folder-delete').click(openPopupDeleting);\n$('.js-file-delete').click(openPopupDeleting);\n$('.js-rename').click(openPopupRenaming);\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n  //обработчики загрузки данных с сервера\n  function onSuccessSubFolders (url, serverData) {\n    //выделяем id родительской папки из url\n    var parentFolderId = url.replace('../jsons/tree-', '').replace('.json', '');\n    $('#' + parentFolderId).after('<ul id=\"sublist-' + parentFolderId + '\" class=\"tree__sublist\"></ul>');\n    //запускаем цикл по массиву объектов;\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяем: папка или файл\n      if (serverData[i].hasOwnProperty('folderId')) {\n\n        //проверяем, пустая ли папка\n        if (serverData[i].empty == 'empty') {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n        } else {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n        }\n\n      } else if (serverData[i].hasOwnProperty('fileId')) {\n        $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].fileId + '\" class=\"tree__files-atom\"><span></span>' + serverData[i].fileName + '.' + serverData[i].fileType + '</p></li>');\n        var iconUrl = 'url(\"' + serverData[i].fileIcon + '\")';\n        $('#' + serverData[i].fileId + ' span').css('background-image', iconUrl);\n        $('#' + serverData[i].fileId).after('<p class=\"tree__files-description to-delete\">' + serverData[i].fileDescription + '</p>');\n      } else {\n        window.onError.errorMessageShow('загрузили непонятно что...');\n      }\n    }\n    //поставить соотв обработчики событий;\n    $('.tree__files-atom').click(window.onAtomClick.onFileClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n    //$('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('#sublist-' + parentFolderId + ' .tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__files-atom').hover(window.tooltip.tooltipShow, window.tooltip.tooltipHide);\n  };\n\n  function onErrorSubFolders () {\n    window.onError.errorMessageShow('Ошибка загрузки данных о вложенных файлах и папках');\n  };\n\n  function onFolderClick () {//выполняется только для непустой папки\n    //id кликнутого элемента - $(this).attr('id');\n    //маркируем\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n    //делаем доступными пункты меню для папок\n    $('button.js-rename').removeAttr('disabled');\n    $('button.js-folder-delete').removeAttr('disabled');\n    var folderName = $(this).html();\n    $('.deleting__text span').html(folderName);\n    $('.renaming__text span').html(folderName);\n    //делаем недоступными пункты меню для файлов\n    $('button.js-file-download').attr('disabled', 'true');\n    $('button.js-file-download').removeAttr('href');\n    $('button.js-file-delete').attr('disabled', 'true');\n\n    //проверяем, открыта папка или нет\n    if ( $(this).hasClass('tree__folders-atom--closed') ) {\n      $(this).removeClass('tree__folders-atom--closed');\n      $(this).addClass('tree__folders-atom--opened');\n        //проверить, есть ли соседний ul с классом  tree__sublist\n        if ( $('ul#sublist-' + $(this).attr('id') ).length ) {\n          $('ul#sublist-' + $(this).attr('id') ).removeClass('to-delete');\n        } else {\n          //запрашваем данные с сервера\n          var subFoldersUrl = '../jsons/tree-' + $(this).attr('id') + '.json';\n          window.server.download(subFoldersUrl, onSuccessSubFolders, onErrorSubFolders);\n        }\n    } else {\n      $(this).removeClass('tree__folders-atom--opened');\n      $(this).addClass('tree__folders-atom--closed');\n      //скрываем подсписок\n      $('ul#sublist-' + $(this).attr('id') ).addClass('to-delete');\n    }\n  };\n\n  //----------------------------------------------------------------------\n\n  function onFileClick () {\n    //маркируем строку с именем файла в дереве\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n\n    //проверяем: открыт файл или нет; если не открыт тогда выполняем запрос на сервер и отображение\n    if ( !$(this).attr('data-opened') ) {\n      $(this).attr('data-opened', 'opened');\n      //вызываем функцию отображения содержимого файла\n      window.fileview.fileView(this);\n    } else {\n      //если открыт, то переключаем вкладки\n      //получаем id выбранного файла, по нему находим закладку и textarea\n      var fileId = $(this).attr('id');\n      $('.bookmarks__item').removeClass('bookmarks__item--current');\n      $('.bookmarks__item').filter('#bookmark-' + fileId).addClass('bookmarks__item--current');\n\n      $('.text-area textarea').addClass('to-delete');\n      $('.text-area textarea').filter('#textarea-' + fileId).removeClass('to-delete');\n    }\n  };\n\n  function onFolderEmptyClick () {\n    //только маркируем элемент\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n  //менять значок на открытую папку или нет????\n    //делаем доступными пункты меню для папок\n    $('button.js-rename').removeAttr('disabled');\n    $('button.js-folder-delete').removeAttr('disabled');\n    //делаем недоступными пункты меню для файлов\n    $('button.js-file-download').attr('disabled', 'true');\n    $('button.js-file-download').removeAttr('href');\n    $('button.js-file-delete').attr('disabled', 'true');\n\n  };\n\n  window.onAtomClick = {\n    onFileClick: onFileClick,\n    onFolderEmptyClick: onFolderEmptyClick,\n    onFolderClick: onFolderClick\n  };\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n  function errorMessageShow (textMessage) {\n    $('.message').removeClass('to-delete');\n    $('.message__dynamic-text').html(textMessage);\n    $('.js-popup-button-clear').click(function () {\n      $('.message__dynamic-text').html('');\n      $('.message').addClass('to-delete');\n    });\n  };\n  window.onError = {\n    errorMessageShow: errorMessageShow\n  };\n}(window.jQuery);\n","//открывает всплывающие подсказки к файлам\n+function () {\n  'use strict';\n\n  function tooltipShow(evt) {\n    //позиционируем: получаем координаты мыши внутри files-tree__atom, задаем значения top и left для подсказки\n    console.log('hover');\n    var coordX = evt.pageX - $(this).offset().left;\n    var coordY = evt.pageY - $(this).offset().top;\n    $(this).next().css({'top': coordY, 'left': coordX});\n    $(this).next().removeClass('to-delete');\n\n    //перемещаем подсказку при движении мыши в пределах элемента\n    function tooltipMove (evt) {\n      var coordX = evt.pageX - $(this).offset().left;\n      var coordY = evt.pageY - $(this).offset().top;\n      $(this).next().css({'top': coordY, 'left': coordX});\n    };\n    $('.tree__files-atom').mousemove(tooltipMove);\n  };\n\n  function tooltipHide() {\n    $(this).next().addClass('to-delete');\n  };\n\n  //$('.tree__files-atom').hover(tooltipShow, tooltipHide);\n\n  window.tooltip = {\n    tooltipShow: tooltipShow,\n    tooltipHide: tooltipHide\n  };\n\n}(window.jQuery);\n","//открываем окно выбора файла, скачиваем файл, отображаем его содержимое\n+function () {\n  'use strict';\n\n  function onUploaded () {\n    var reader = new FileReader();\n  \treader.onload = function(e){\n  \t\t$(\"#viewing-area-1\").val(e.target.result);\n  \t};\n  \treader.readAsText($('#upload-file')[0].files[0], 'UTF-8');\n  };\n\n  //обрабатываем событие change после выбора файла\n  $('#upload-file').change(onUploaded);\n\n}(window.jQuery);\n","//валидация значений во всплывающих окнах; для имен файлов и папок\n+function () {\n  'use strict';\n  function fileNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters =  /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  function folderNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters = /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  window.validation = {\n    fileNameValidation: fileNameValidation,\n    folderNameValidation: folderNameValidation\n  };\n\n}(window.jQuery);\n"]}