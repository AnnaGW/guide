{"version":3,"sources":["animation.js","bookmarks-toggle.js","deleting.js","file-tree-building.js","file-view.js","menu-event.js","message.js","on-atom-click.js","on-error.js","server.js","tooltip.js","upload-file.js","validation.js"],"names":["window","animation","animatedMessageAppearance","text","$","html","addClass","jQuery","viewFileClose","bookmarkId","this","closest","attr","replace","remove","filter","removeAttr","removeClass","length","prop","first","bookmarkNewCurrId","viewFileToggle","bookmark","bookmarkClose","click","bookmarkToggle","deleting","fileDeleting","evt","console","log","val","menuEvents","closePopupDeletingFile","filename","onSuccessFirstFolders","url","serverData","i","empty","append","folderID","folderName","onAtomClick","onFolderClick","onFolderEmptyClick","onErrorFirstFolders","onError","errorMessageShow","load","server","download","onSuccessFile","fileFullName","fileName","fileType","prepend","fileId","fileContent","onErrorFile","fileview","fileView","selectedFile","dataUrl","id","unbind","closePopupDeletingFolder","closePopupRenaming","closePopupCreation","keydown","key","on","value","validation","folderNameValidation","fileNameValidation","onSuccessSubFolders","parentFolderId","after","hasOwnProperty","folderId","iconUrl","fileIcon","css","fileDescription","onFileClick","hover","tooltip","tooltipShow","tooltipHide","onErrorSubFolders","hasClass","subFoldersUrl","textMessage","urlGet","onSuccess","xhr","XMLHttpRequest","responseType","open","addEventListener","status","response","statusText","timeout","send","upload","data","consts","URL_POST","coordX","pageX","offset","left","coordY","pageY","top","next","mousemove","change","reader","FileReader","onload","e","target","result","readAsText","files","name","test"],"mappings":"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","file":"script.min.js","sourcesContent":["//показывает анимированное всплывающее сообщение\n+function () {\n  'use strict';\n  function animatedMessageAppearance (text) {\n    $('.animated-message__text').html(text);\n    $('.animated-message__popup').addClass('animated-message__popup--animation');\n  };\n\n  window.animation = {\n    animatedMessageAppearance: animatedMessageAppearance\n  };\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n  //закрывашка для закладки\n  function viewFileClose() { //удаляет закладку и область просмотра,\n    //найходим id удаляемой закладки-родителя\n    var bookmarkId = $(this).closest('.bookmarks__item').attr('id').replace('bookmark-', '');\n    $(this).closest('.bookmarks__item').remove();\n\n    //по id найходим textarea и удаляем его\n    $('.text-area textarea').filter('#textarea-' + bookmarkId).remove();\n    //по нему найходим элемент в дереве файлов и снимаем атрибут data-open\n    $('.tree__files-atom').filter('#' + bookmarkId).removeAttr('data-opened');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n\n    //если удаляем последнюю закладку, то восстанавливаем bookmarks__item--zero и js-text-area--zero и прочее\n    if ($('.bookmarks__item').length == 1) {\n      $('.js-bookmarks__item--zero').removeClass('to-delete');\n      $('.js-bookmarks__item--zero').removeClass('bookmarks__item--current');\n      $('.js-bookmarks__item--zero button').remove();\n      //восстановливаем js-text-area--zero\n      $('.js-text-area--zero').removeClass('to-delete');\n      //делаем недоступными пункты меню\n      $('button.js-file-delete').prop('disabled', true);\n      $('button.js-rename').prop('disabled', true);\n      //$('.js-file-upload').addClass('main-menu__item--disabled');\n      $('.js-file-download').removeAttr('href');\n      $('.js-file-download').addClass('main-menu__item--disabled');\n    } else {\n      //находим первую закладку в наборе и даем ей current\n      $('.bookmarks__item').first().addClass('bookmarks__item--current');\n      var bookmarkNewCurrId = $('.bookmarks__item').first().attr('id').replace('bookmark-', '');\n      //находим первый textarea и отображаем его, правильнее находить по id!!!\n      $('.text-area textarea').first().removeClass('to-delete');\n      $('.tree__files-atom').filter('#' + bookmarkNewCurrId).addClass('tree__atom-current');\n    }\n  };\n\n  function bookmarkClose() {\n    $('.bookmark__close').click(viewFileClose);\n  };\n//-------------------------------------------------------------------\n  //переключатель вкладок и textarea\n  function viewFileToggle() {\n    $('.bookmarks__item').removeClass('bookmarks__item--current');\n    $(this).addClass('bookmarks__item--current');\n    //получаем id закладки без префикса\n    var bookmarkId = $(this).attr('id').replace('bookmark-', '');\n\n    //находим среди textarea элемент с соотв id\n    $('.text-area textarea').addClass('to-delete');\n    $('.text-area textarea').filter('#textarea-' + bookmarkId).removeClass('to-delete');\n\n    //находим среди files-tree__atom элемент с соотв id маркируем его\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').filter('#' + bookmarkId).addClass('tree__atom-current');\n  };\n\n\n  function bookmarkToggle() {\n    $('.bookmarks__item').click(viewFileToggle); //?? приоритет с bookmark__close???\n  };\n\n\n  window.bookmark = {\n    bookmarkClose: bookmarkClose,\n    bookmarkToggle: bookmarkToggle\n  };\n}(window.jQuery);\n","//удаление файла / папки;\n+function () {\n  'use strict';\n  function fileDeleting (evt) {\n    console.log($('.deleting-file input').val());\n    $('#' + $('.deleting-file input').val()).remove();\n    window.menuEvents.closePopupDeletingFile();\n    var filename = $('.deleting-file__text span').html();\n    window.animation.animatedMessageAppearance('Файл ' + filename + ' удален');\n  };\n\n  window.deleting = {\n    fileDeleting: fileDeleting\n  };\n\n}(window.jQuery);\n","//построение списка папок первого уровня; допущение: файлов нет;\n+function () {\n  'use strict';\n\n  function onSuccessFirstFolders (url, serverData) {\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяeм на основе данных из БД по свойству empty: пустая папка или нет; даем соотв-й класс(ы)\n      if (serverData[i].empty == 'empty') {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n\n      } else {\n        $('.tree__list').append('<li><p id=\"' + serverData[i].folderID + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n      }\n    }\n    $('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n  };\n\n  function onErrorFirstFolders () {\n    window.onError.errorMessageShow('Ошибка загрузки данных о папках первого уровня');\n  };\n\n  $(window).load(function () {\n    var treeUrl = '../jsons/tree0.json';\n    window.server.download(treeUrl, onSuccessFirstFolders, onErrorFirstFolders);\n  });\n\n}(window.jQuery);\n","//обрабатывает клики на файлах в дереве, проверяет, открыт файл или нет, если нет, то забирает с сервера  json и отображает содержимое в окне просмотра; исключает повторный запрос на сервер, если файл уже открыт.\n//Делает доступными пункты меню для работы с файлами, формирует их атрибуты в зависимости от выбранного файла\n\n+function () {\n  'use strict';\n\nvar onSuccessFile = function (url, serverData) {\n  //создаем закладку с именем файла\n  //формируем содержимое закладки\n  var fileFullName = serverData.fileName + '.' + serverData.fileType;\n  //скрываем bookmarks__item--zero и убираем класс current у всех элем-тов\n  $('.js-bookmarks__item--zero').addClass('to-delete');\n  $('.bookmarks__item').removeClass('bookmarks__item--current');\n  //создаем новый  с id, который соотв файлу\n  var bookmarkCloseButton = '<button class=\"bookmark__close\"></button>';\n  $('.bookmarks__list').prepend('<li class=\"bookmarks__item bookmarks__item--current\" id=\"bookmark-' + serverData.fileId + '\"><span>' + fileFullName + '</span>' + bookmarkCloseButton + '</li>');\n  //$('.bookmarks__item span').after('<button class=\"bookmark__close\"></button>');\n  window.bookmark.bookmarkClose();//прослушка для закрывашки\n\n  //отображение содержимого файла\n  //скрываем js-text-area--zero\n  $('.text-area textarea').addClass('to-delete');\n  //создаем textarea для открываемого  файла\n  $('.text-area').prepend('<textarea name=\"name\" rows=\"8\" cols=\"80\" id=\"textarea-' + serverData.fileId + '\"></textarea>');\n  $('.text-area textarea').first().val(serverData.fileContent);\n  window.bookmark.bookmarkToggle();//прослушка для переключения\n\n  //делаем доступными пункты меню для файлов\n  $('button.js-file-delete').removeAttr('disabled');\n  $('button.js-rename').removeAttr('disabled');\n  $('.js-file-download').removeClass('main-menu__item--disabled');\n  //делаем недоступными пункты меню для папок\n  $('button.js-folder-delete').attr('disabled', 'true');\n\n  //формируем атрибуты пунктов меню\n  $('.deleting-file__text span').html(fileFullName);\n  $('.deleting-file input').val(serverData.fileId);\n  $('.renaming__text span').html(fileFullName);\n  $('.main-menu__download').attr('href', 'files/' + fileFullName);\n};\n\nvar onErrorFile = function () {\n  window.onError.errorMessageShow('Содержимое файла не загружено');\n};\n\nfunction fileView (selectedFile) {\n  //формируем адрес запроса в зависимости от выбранного файла\n  var dataUrl = '../jsons/' + selectedFile.id + '.json';\n  //загружаем данные о файле с сервера, !!!пока статичные json-ы\n  window.server.download(dataUrl, onSuccessFile, onErrorFile);\n};\n\nwindow.fileview = {\n  fileView: fileView\n};\n}(window.jQuery);\n","//обрабатываем нажатия на пункты меню, открываем всплывающие окна\n+function () {\n  'use strict';\n\nfunction closePopupDeletingFile () {\n  $('.deleting-file').addClass('to-delete');\n\n  //очистка поля с именем файла/папки\n  $('.js-popup-close-deleting').unbind('click', closePopupDeletingFile);\n};\n\nfunction openPopupDeletingFile () {\n  $('.deleting-file').removeClass('to-delete');\n  $('.js-popup-close-deleting').click(closePopupDeletingFile);\n  $('.js-popup-button-delete').click(window.deleting.fileDeleting);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupDeletingFile();\n    }\n  });\n};\n\n//----------------------------------------------------------\n\nfunction closePopupDeletingFolder () {\n  $('.deleting-folder').addClass('to-delete');\n\n  //очистка поля с именем файла/папки\n  $('.js-popup-close-deleting').unbind('click', closePopupDeletingFolder);\n};\n\nfunction openPopupDeletingFolder () {\n  $('.deleting-folder').removeClass('to-delete');\n  $('.js-popup-close-deleting').click(closePopupDeletingFolder);\n  $('.js-popup-button-delete').click(closePopupDeletingFolder);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupDeletingFolder();\n    }\n  });\n};\n\n//----------------------------------------------------------\n\nfunction closePopupRenaming () {\n  $('.renaming').addClass('to-delete');\n  //очистка поля с именем файла/папки\n  $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-popup-button-rename').attr('disabled', 'true');//поставили disabled\n  $('.js-popup-input-rename').val('');\n  $('.js-popup-close-renaming').unbind('click', closePopupRenaming);\n};\n\nfunction openPopupRenaming () {\n  $('.renaming').removeClass('to-delete');\n  $('.js-popup-close-renaming').click(closePopupRenaming);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupRenaming();\n    }\n  });\n  $('.js-popup-input-rename').on('input',function() {\n    $('.js-popup-button-rename').removeAttr('disabled');//убрали disabled\n    $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-popup-button-rename').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-popup-input-rename').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.fileNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupRenaming();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-validation-message').html('имя должно быть на латинице');\n      $('.js-validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//---------------------------------------------------------------\n\nfunction closePopupCreation () {\n  $('.creation').addClass('to-delete');\n  $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n  $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n  $('.js-popup-input-create').val('');\n  $('.js-popup-close-creation').unbind('click', closePopupCreation);\n};\n\nfunction openPopupCreation () {\n  $('.creation').removeClass('to-delete');\n  $('.js-popup-close-creation').click(closePopupCreation);\n  $('body').keydown(function(evt){\n    if(evt.key === \"Escape\") {\n      closePopupCreation();\n    }\n  });\n  $('.js-popup-input-create').on('input',function() {\n    $('.js-popup-button-create').removeAttr('disabled');//убрали disabled\n    $('.js-validation-message').addClass('to-delete');//убрали возможное сообщение об ошибке валидации\n    if ($(this).val() === '') {\n      $('.js-popup-button-create').attr('disabled', 'true');//поставили disabled\n    }\n  });\n  $('.js-popup-input-create').on('change',function() {\n    var value = $(this).val();//получили значение input\n    if (window.validation.folderNameValidation(value) ) {\n      //отправка формы, пока просто закрываем\n      closePopupCreation();\n    } else {\n      //вывод сообщения об ошибке\n      $('.js-validation-message').html('не правильно, пишите на латинице');\n      $('.js-validation-message').removeClass('to-delete');\n    }\n  });\n};\n\n//----------------------------------------------------\n\n$('.js-folder-create').click(openPopupCreation);\n$('.js-folder-delete').click(openPopupDeletingFolder);\n$('.js-file-delete').click(openPopupDeletingFile);\n$('.js-rename').click(openPopupRenaming);\n\n\nwindow.menuEvents = {\n  closePopupDeletingFile: closePopupDeletingFile\n};\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n\n}(window.jQuery);\n","+function () {\n  'use strict';\n  //обработчики загрузки данных с сервера\n  function onSuccessSubFolders (url, serverData) {\n    //выделяем id родительской папки из url\n    var parentFolderId = url.replace('../jsons/tree-', '').replace('.json', '');\n    $('#' + parentFolderId).after('<ul id=\"sublist-' + parentFolderId + '\" class=\"tree__sublist\"></ul>');\n    //запускаем цикл по массиву объектов;\n    for (var i = 0; i < serverData.length; i++) {\n      //проверяем: папка или файл\n      if (serverData[i].hasOwnProperty('folderId')) {\n\n        //проверяем, пустая ли папка\n        if (serverData[i].empty == 'empty') {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom--empty\">' + serverData[i].folderName + '</p></li>');\n        } else {\n          $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].folderId + '\" class=\"tree__folders-atom tree__folders-atom--closed\">' + serverData[i].folderName + '</p></li>');\n        }\n\n      } else if (serverData[i].hasOwnProperty('fileId')) {\n        $('#sublist-' + parentFolderId).append('<li><p id=\"' + serverData[i].fileId + '\" class=\"tree__files-atom\"><span></span>' + serverData[i].fileName + '.' + serverData[i].fileType + '</p></li>');\n        var iconUrl = 'url(\"' + serverData[i].fileIcon + '\")';\n        $('#' + serverData[i].fileId + ' span').css('background-image', iconUrl);\n        $('#' + serverData[i].fileId).after('<p class=\"tree__files-description to-delete\">' + serverData[i].fileDescription + '</p>');\n      } else {\n        window.onError.errorMessageShow('загрузили непонятно что...');\n      }\n    }\n    //поставить соотв обработчики событий;\n    $('.tree__files-atom').click(window.onAtomClick.onFileClick);\n    $('.tree__folders-atom--empty').click(window.onAtomClick.onFolderEmptyClick);\n    //$('.tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('#sublist-' + parentFolderId + ' .tree__folders-atom').click(window.onAtomClick.onFolderClick);\n    $('.tree__files-atom').hover(window.tooltip.tooltipShow, window.tooltip.tooltipHide);\n  };\n\n  function onErrorSubFolders () {\n    window.onError.errorMessageShow('Ошибка загрузки данных о вложенных файлах и папках');\n  };\n\n  function onFolderClick () {//выполняется только для непустой папки\n    //id кликнутого элемента - $(this).attr('id');\n    //маркируем\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n    //делаем доступными пункты меню для папок\n    $('button.js-rename').removeAttr('disabled');\n    $('button.js-folder-delete').removeAttr('disabled');\n    var folderName = $(this).html();\n    $('.deleting-folder__text span').html(folderName);\n    $('.renaming__text span').html(folderName);\n    //делаем недоступными пункты меню для файлов\n    $('button.js-file-download').attr('disabled', 'true');\n    $('button.js-file-download').removeAttr('href');\n    $('button.js-file-delete').attr('disabled', 'true');\n\n    //проверяем, открыта папка или нет\n    if ( $(this).hasClass('tree__folders-atom--closed') ) {\n      $(this).removeClass('tree__folders-atom--closed');\n      $(this).addClass('tree__folders-atom--opened');\n        //проверить, есть ли соседний ul с классом  tree__sublist\n        if ( $('ul#sublist-' + $(this).attr('id') ).length ) {\n          $('ul#sublist-' + $(this).attr('id') ).removeClass('to-delete');\n        } else {\n          //запрашваем данные с сервера\n          var subFoldersUrl = '../jsons/tree-' + $(this).attr('id') + '.json';\n          window.server.download(subFoldersUrl, onSuccessSubFolders, onErrorSubFolders);\n        }\n    } else {\n      $(this).removeClass('tree__folders-atom--opened');\n      $(this).addClass('tree__folders-atom--closed');\n      //скрываем подсписок\n      $('ul#sublist-' + $(this).attr('id') ).addClass('to-delete');\n    }\n  };\n\n  //----------------------------------------------------------------------\n\n  function onFileClick () {\n    //маркируем строку с именем файла в дереве\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n\n    //проверяем: открыт файл или нет; если не открыт тогда выполняем запрос на сервер и отображение\n    if ( !$(this).attr('data-opened') ) {\n      $(this).attr('data-opened', 'opened');\n      //вызываем функцию отображения содержимого файла\n      window.fileview.fileView(this);\n    } else {\n      //если открыт, то переключаем вкладки\n      //получаем id выбранного файла, по нему находим закладку и textarea\n      var fileId = $(this).attr('id');\n      $('.bookmarks__item').removeClass('bookmarks__item--current');\n      $('.bookmarks__item').filter('#bookmark-' + fileId).addClass('bookmarks__item--current');\n\n      $('.text-area textarea').addClass('to-delete');\n      $('.text-area textarea').filter('#textarea-' + fileId).removeClass('to-delete');\n    }\n  };\n\n  function onFolderEmptyClick () {\n    //только маркируем элемент\n    $('.tree__folders-atom--empty').removeClass('tree__atom-current');\n    $('.tree__folders-atom').removeClass('tree__atom-current');\n    $('.tree__files-atom').removeClass('tree__atom-current');\n    $(this).addClass('tree__atom-current');\n  //менять значок на открытую папку или нет????\n    //делаем доступными пункты меню для папок\n    $('button.js-rename').removeAttr('disabled');\n    $('button.js-folder-delete').removeAttr('disabled');\n    var folderName = $(this).html();\n    $('.deleting-folder__text span').html(folderName);\n    $('.renaming__text span').html(folderName);\n    //делаем недоступными пункты меню для файлов\n    $('button.js-file-download').attr('disabled', 'true');\n    $('button.js-file-download').removeAttr('href');\n    $('button.js-file-delete').attr('disabled', 'true');\n\n  };\n\n  window.onAtomClick = {\n    onFileClick: onFileClick,\n    onFolderEmptyClick: onFolderEmptyClick,\n    onFolderClick: onFolderClick\n  };\n}(window.jQuery);\n","+function () {\n  'use strict';\n\n  function errorMessageShow (textMessage) {\n    $('.message').removeClass('to-delete');\n    $('.message__dynamic-text').html(textMessage);\n    $('.js-popup-button-clear').click(function () {\n      $('.message__dynamic-text').html('');\n      $('.message').addClass('to-delete');\n    });\n  };\n  window.onError = {\n    errorMessageShow: errorMessageShow\n  };\n}(window.jQuery);\n","'use strict';\n\n(function () {\n  var download = function (urlGet, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.responseType = 'json'; // !!!\n    xhr.open('GET', urlGet);\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        //console.log('xhr.status' + xhr.status);\n        onSuccess(urlGet, xhr.response);\n      } else {\n        onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError('Произошла ошибка соединения');\n    });\n    xhr.addEventListener('timeout', function () {\n      onError('Запрос не успел выполниться за ' + xhr.timeout / 1000 + 'с');\n    });\n    xhr.timeout = 4000;\n\n    xhr.send();\n  };\n\n  var upload = function (data, onSuccess, onError) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'json';\n\n    xhr.addEventListener('load', function () {\n      if (xhr.status === 200) {\n        onSuccess();\n      } else {\n        onError('Статус ответа: ' + xhr.status + ' ' + xhr.statusText);\n      }\n    });\n    xhr.addEventListener('error', function () {\n      onError();\n    });\n    xhr.addEventListener('timeout', function () {\n      onError();\n    });\n    xhr.timeout = 4000;\n\n    xhr.open('POST', window.consts.URL_POST);\n    xhr.send(data);\n  };\n\n  window.server = {\n    download: download,\n    upload: upload\n  };\n})();\n","//открывает всплывающие подсказки к файлам\n+function () {\n  'use strict';\n\n  function tooltipShow(evt) {\n    //позиционируем: получаем координаты мыши внутри files-tree__atom, задаем значения top и left для подсказки\n    var coordX = evt.pageX - $(this).offset().left;\n    var coordY = evt.pageY - $(this).offset().top;\n    $(this).next().css({'top': coordY, 'left': coordX});\n    $(this).next().removeClass('to-delete');\n\n    //перемещаем подсказку при движении мыши в пределах элемента\n    function tooltipMove (evt) {\n      var coordX = evt.pageX - $(this).offset().left;\n      var coordY = evt.pageY - $(this).offset().top;\n      $(this).next().css({'top': coordY, 'left': coordX});\n    };\n    $('.tree__files-atom').mousemove(tooltipMove);\n  };\n\n  function tooltipHide() {\n    $(this).next().addClass('to-delete');\n  };\n\n  //$('.tree__files-atom').hover(tooltipShow, tooltipHide);\n\n  window.tooltip = {\n    tooltipShow: tooltipShow,\n    tooltipHide: tooltipHide\n  };\n\n}(window.jQuery);\n","//открываем окно выбора файла, скачиваем файл, отображаем его содержимое\n+function () {\n  'use strict';\n\n  function onUploaded () {\n    var reader = new FileReader();\n  \treader.onload = function(e){\n  \t\t$(\"#viewing-area-1\").val(e.target.result);\n  \t};\n  \treader.readAsText($('#upload-file')[0].files[0], 'UTF-8');\n  };\n\n  //обрабатываем событие change после выбора файла\n  $('#upload-file').change(onUploaded);\n\n}(window.jQuery);\n","//валидация значений во всплывающих окнах; для имен файлов и папок\n+function () {\n  'use strict';\n  function fileNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters =  /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  function folderNameValidation (name) {\n    //исключаем кириллицу\n    var onlyLetters = /[А-Яа-я]/;\n    if (onlyLetters.test(name)) {\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  window.validation = {\n    fileNameValidation: fileNameValidation,\n    folderNameValidation: folderNameValidation\n  };\n\n}(window.jQuery);\n"]}