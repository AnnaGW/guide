!function(){"use strict";window.animation={animatedMessageAppearance:function(e){$(".animated-message__text").html(e),$(".animated-message__popup").addClass("animated-message__popup--animation")}}}(window.jQuery),function(){"use strict";function e(){var e=$(this).closest(".bookmarks__item").attr("id").replace("bookmark-","");if($(this).closest(".bookmarks__item").remove(),$(".text-area textarea").filter("#textarea-"+e).remove(),$(".tree__files-atom").filter("#"+e).removeAttr("data-opened"),$(".tree__files-atom").removeClass("tree__atom-current"),$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current"),1==$(".bookmarks__item").length)$(".js-bookmarks__item--zero").removeClass("to-delete"),$(".js-bookmarks__item--zero").removeClass("bookmarks__item--current"),$(".js-bookmarks__item--zero button").remove(),$(".js-text-area--zero").removeClass("to-delete"),$("button.js-file-delete").prop("disabled",!0),$("button.js-rename").prop("disabled",!0),$(".js-file-download").removeAttr("href"),$(".js-file-download").addClass("main-menu__item--disabled");else{$(".bookmarks__item").first().addClass("bookmarks__item--current");var t=$(".bookmarks__item").first().attr("id").replace("bookmark-","");$(".text-area textarea").first().removeClass("to-delete"),$(".tree__files-atom").filter("#"+t).addClass("tree__atom-current")}}function t(){$(".bookmarks__item").removeClass("bookmarks__item--current"),$(this).addClass("bookmarks__item--current");var e=$(this).attr("id").replace("bookmark-","");$(".text-area textarea").addClass("to-delete"),$(".text-area textarea").filter("#textarea-"+e).removeClass("to-delete"),$(".tree__files-atom").removeClass("tree__atom-current"),$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__files-atom").filter("#"+e).addClass("tree__atom-current")}window.bookmark={bookmarkClose:function(){$(".bookmark__close").click(e)},bookmarkToggle:function(){$(".bookmarks__item").click(t)}}}(window.jQuery),function(){"use strict";window.deleting={fileDeleting:function(e){console.log($(".deleting-file input").val()),$("#"+$(".deleting-file input").val()).remove(),window.menuEvents.closePopupDeletingFile();var t=$(".deleting-file__text span").html();window.animation.animatedMessageAppearance("Файл "+t+" удален")}}}(window.jQuery),function(){"use strict";function e(e,t){for(var o=0;o<t.length;o++)"empty"==t[o].empty?$(".tree__list").append('<li><p id="'+t[o].folderID+'" class="tree__folders-atom--empty">'+t[o].folderName+"</p></li>"):$(".tree__list").append('<li><p id="'+t[o].folderID+'" class="tree__folders-atom tree__folders-atom--closed">'+t[o].folderName+"</p></li>");$(".tree__folders-atom").click(window.onAtomClick.onFolderClick),$(".tree__folders-atom--empty").click(window.onAtomClick.onFolderEmptyClick)}function t(){window.onError.errorMessageShow("Ошибка загрузки данных о папках первого уровня")}$(window).load(function(){window.server.download("../jsons/tree0.json",e,t)})}(window.jQuery),function(){"use strict";var o=function(e,t){var o=t.fileName+"."+t.fileType;$(".js-bookmarks__item--zero").addClass("to-delete"),$(".bookmarks__item").removeClass("bookmarks__item--current");$(".bookmarks__list").prepend('<li class="bookmarks__item bookmarks__item--current" id="bookmark-'+t.fileId+'"><span>'+o+'</span><button class="bookmark__close"></button></li>'),window.bookmark.bookmarkClose(),$(".text-area textarea").addClass("to-delete"),$(".text-area").prepend('<textarea name="name" rows="8" cols="80" id="textarea-'+t.fileId+'"></textarea>'),$(".text-area textarea").first().val(t.fileContent),window.bookmark.bookmarkToggle(),$("button.js-file-delete").removeAttr("disabled"),$("button.js-rename").removeAttr("disabled"),$(".js-file-download").removeClass("main-menu__item--disabled"),$("button.js-folder-delete").attr("disabled","true"),$(".deleting-file__text span").html(o),$(".deleting-file input").val(t.fileId),$(".renaming__text span").html(o),$(".main-menu__download").attr("href","files/"+o)},s=function(){window.onError.errorMessageShow("Содержимое файла не загружено")};window.fileview={fileView:function(e){var t="../jsons/"+e.id+".json";window.server.download(t,o,s)}}}(window.jQuery),function(){"use strict";function t(){$(".deleting-file").addClass("to-delete"),$(".js-popup-close-deleting").unbind("click",t)}function o(){$(".deleting-folder").addClass("to-delete"),$(".js-popup-close-deleting").unbind("click",o)}function s(){$(".renaming").addClass("to-delete"),$(".js-validation-message").addClass("to-delete"),$(".js-popup-button-rename").attr("disabled","true"),$(".js-popup-input-rename").val(""),$(".js-popup-close-renaming").unbind("click",s)}function a(){$(".creation").addClass("to-delete"),$(".js-validation-message").addClass("to-delete"),$(".js-popup-button-create").attr("disabled","true"),$(".js-popup-input-create").val(""),$(".js-popup-close-creation").unbind("click",a)}$(".js-folder-create").click(function(){$(".creation").removeClass("to-delete"),$(".js-popup-close-creation").click(a),$("body").keydown(function(e){"Escape"===e.key&&a()}),$(".js-popup-input-create").on("input",function(){$(".js-popup-button-create").removeAttr("disabled"),$(".js-validation-message").addClass("to-delete"),""===$(this).val()&&$(".js-popup-button-create").attr("disabled","true")}),$(".js-popup-input-create").on("change",function(){var e=$(this).val();window.validation.folderNameValidation(e)?a():($(".js-validation-message").html("не правильно, пишите на латинице"),$(".js-validation-message").removeClass("to-delete"))})}),$(".js-folder-delete").click(function(){$(".deleting-folder").removeClass("to-delete"),$(".js-popup-close-deleting").click(o),$(".js-popup-button-delete").click(o),$("body").keydown(function(e){"Escape"===e.key&&o()})}),$(".js-file-delete").click(function(){$(".deleting-file").removeClass("to-delete"),$(".js-popup-close-deleting").click(t),$(".js-popup-button-delete").click(window.deleting.fileDeleting),$("body").keydown(function(e){"Escape"===e.key&&t()})}),$(".js-rename").click(function(){$(".renaming").removeClass("to-delete"),$(".js-popup-close-renaming").click(s),$("body").keydown(function(e){"Escape"===e.key&&s()}),$(".js-popup-input-rename").on("input",function(){$(".js-popup-button-rename").removeAttr("disabled"),$(".js-validation-message").addClass("to-delete"),""===$(this).val()&&$(".js-popup-button-rename").attr("disabled","true")}),$(".js-popup-input-rename").on("change",function(){var e=$(this).val();window.validation.fileNameValidation(e)?s():($(".js-validation-message").html("имя должно быть на латинице"),$(".js-validation-message").removeClass("to-delete"))})}),window.menuEvents={closePopupDeletingFile:t}}(window.jQuery),window.jQuery,function(){"use strict";function o(e,t){var o=e.replace("../jsons/tree-","").replace(".json","");$("#"+o).after('<ul id="sublist-'+o+'" class="tree__sublist"></ul>');for(var s=0;s<t.length;s++)if(t[s].hasOwnProperty("folderId"))"empty"==t[s].empty?$("#sublist-"+o).append('<li><p id="'+t[s].folderId+'" class="tree__folders-atom--empty">'+t[s].folderName+"</p></li>"):$("#sublist-"+o).append('<li><p id="'+t[s].folderId+'" class="tree__folders-atom tree__folders-atom--closed">'+t[s].folderName+"</p></li>");else if(t[s].hasOwnProperty("fileId")){$("#sublist-"+o).append('<li><p id="'+t[s].fileId+'" class="tree__files-atom"><span></span>'+t[s].fileName+"."+t[s].fileType+"</p></li>");var a='url("'+t[s].fileIcon+'")';$("#"+t[s].fileId+" span").css("background-image",a),$("#"+t[s].fileId).after('<p class="tree__files-description to-delete">'+t[s].fileDescription+"</p>")}else window.onError.errorMessageShow("загрузили непонятно что...");$(".tree__files-atom").click(window.onAtomClick.onFileClick),$(".tree__folders-atom--empty").click(window.onAtomClick.onFolderEmptyClick),$("#sublist-"+o+" .tree__folders-atom").click(window.onAtomClick.onFolderClick),$(".tree__files-atom").hover(window.tooltip.tooltipShow,window.tooltip.tooltipHide)}function s(){window.onError.errorMessageShow("Ошибка загрузки данных о вложенных файлах и папках")}window.onAtomClick={onFileClick:function(){if($(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__files-atom").removeClass("tree__atom-current"),$(this).addClass("tree__atom-current"),$(this).attr("data-opened")){var e=$(this).attr("id");$(".bookmarks__item").removeClass("bookmarks__item--current"),$(".bookmarks__item").filter("#bookmark-"+e).addClass("bookmarks__item--current"),$(".text-area textarea").addClass("to-delete"),$(".text-area textarea").filter("#textarea-"+e).removeClass("to-delete")}else $(this).attr("data-opened","opened"),window.fileview.fileView(this)},onFolderEmptyClick:function(){$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__files-atom").removeClass("tree__atom-current"),$(this).addClass("tree__atom-current"),$("button.js-rename").removeAttr("disabled"),$("button.js-folder-delete").removeAttr("disabled");var e=$(this).html();$(".deleting-folder__text span").html(e),$(".renaming__text span").html(e),$("button.js-file-download").attr("disabled","true"),$("button.js-file-download").removeAttr("href"),$("button.js-file-delete").attr("disabled","true")},onFolderClick:function(){$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__files-atom").removeClass("tree__atom-current"),$(this).addClass("tree__atom-current"),$("button.js-rename").removeAttr("disabled"),$("button.js-folder-delete").removeAttr("disabled");var e=$(this).html();if($(".deleting-folder__text span").html(e),$(".renaming__text span").html(e),$("button.js-file-download").attr("disabled","true"),$("button.js-file-download").removeAttr("href"),$("button.js-file-delete").attr("disabled","true"),$(this).hasClass("tree__folders-atom--closed"))if($(this).removeClass("tree__folders-atom--closed"),$(this).addClass("tree__folders-atom--opened"),$("ul#sublist-"+$(this).attr("id")).length)$("ul#sublist-"+$(this).attr("id")).removeClass("to-delete");else{var t="../jsons/tree-"+$(this).attr("id")+".json";window.server.download(t,o,s)}else $(this).removeClass("tree__folders-atom--opened"),$(this).addClass("tree__folders-atom--closed"),$("ul#sublist-"+$(this).attr("id")).addClass("to-delete")}}}(window.jQuery),function(){"use strict";window.onError={errorMessageShow:function(e){$(".message").removeClass("to-delete"),$(".message__dynamic-text").html(e),$(".js-popup-button-clear").click(function(){$(".message__dynamic-text").html(""),$(".message").addClass("to-delete")})}}}(window.jQuery),window.server={download:function(e,t,o){var s=new XMLHttpRequest;s.responseType="json",s.open("GET",e),s.addEventListener("load",function(){200===s.status?t(e,s.response):o("Статус ответа: "+s.status+" "+s.statusText)}),s.addEventListener("error",function(){o("Произошла ошибка соединения")}),s.addEventListener("timeout",function(){o("Запрос не успел выполниться за "+s.timeout/1e3+"с")}),s.timeout=4e3,s.send()},upload:function(e,t,o){var s=new XMLHttpRequest;s.responseType="json",s.addEventListener("load",function(){200===s.status?t():o("Статус ответа: "+s.status+" "+s.statusText)}),s.addEventListener("error",function(){o()}),s.addEventListener("timeout",function(){o()}),s.timeout=4e3,s.open("POST",window.consts.URL_POST),s.send(e)}},function(){"use strict";window.tooltip={tooltipShow:function(e){var t=e.pageX-$(this).offset().left,o=e.pageY-$(this).offset().top;$(this).next().css({top:o,left:t}),$(this).next().removeClass("to-delete"),$(".tree__files-atom").mousemove(function(e){var t=e.pageX-$(this).offset().left,o=e.pageY-$(this).offset().top;$(this).next().css({top:o,left:t})})},tooltipHide:function(){$(this).next().addClass("to-delete")}}}(window.jQuery),function(){"use strict";$("#upload-file").change(function(){var e=new FileReader;e.onload=function(e){$("#viewing-area-1").val(e.target.result)},e.readAsText($("#upload-file")[0].files[0],"UTF-8")})}(window.jQuery),function(){"use strict";window.validation={fileNameValidation:function(e){return!/[А-Яа-я]/.test(e)},folderNameValidation:function(e){return!/[А-Яа-я]/.test(e)}}}(window.jQuery);
//# sourceMappingURL=script.min.js.map
