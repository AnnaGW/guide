!function(){"use strict";function t(){$(".animated-message__popup").removeClass("animated-message__popup--animation")}window.animation={animatedMessageAppearance:function(e){$(".animated-message__text").html(e),$(".animated-message__popup").addClass("animated-message__popup--animation"),setTimeout(t,6500)}}}(window.jQuery),function(){"use strict";window.bookmark={onBookmarkCloseClick:function(){var e=$(this).closest(".bookmarks__item").attr("id").replace("bookmark-","");$(this).closest(".bookmarks__item").html(),window.util.viewAreaClose(e)},onBookmarkClick:function(){$(".bookmarks__item").removeClass("bookmarks__item--current"),$(this).addClass("bookmarks__item--current");var e=$(this).attr("id").replace("bookmark-",""),t=$(this).children("span").html();$(".text-area textarea").addClass("to-delete"),$(".text-area textarea").filter("#textarea-"+e).removeClass("to-delete"),window.util.noMarker(),$(".tree__files-atom").filter("#"+e).addClass("tree__atom-current"),window.menuAccyAttrs.menuForFile(e,t),$(this).hasClass("bookmarks__item--changed")?($(".viewing__button").removeAttr("disabled"),$(".viewing__button").click(window.util.onSaveButtonClick)):($(".viewing__button").attr("disabled","true"),$(".viewing__button").unbind(""))}}}(window.jQuery),function(){"use strict";window.deleting={fileDeleting:function(){var e=$(".deleting-file input").val(),t=$(".deleting-file__text span").html();$("#"+e).remove(),window.animation.animatedMessageAppearance("Файл "+t+" удален"),$("#bookmark-"+e).children(".bookmark__close").trigger("click"),window.menuEvents.closePopupDeletingFile()}}}(window.jQuery),function(){"use strict";var o=function(e,t){var o=t.fileName+"."+t.fileType;$(".js-bookmarks__item--zero").addClass("to-delete"),$(".bookmarks__item").removeClass("bookmarks__item--current");$(".bookmarks__list").prepend('<li class="bookmarks__item bookmarks__item--current" id="bookmark-'+t.fileId+'"><span>'+o+'</span><button class="bookmark__close"></button></li>'),$("#"+t.fileId).removeClass("errorFile"),$(".text-area textarea").addClass("to-delete"),$(".text-area").prepend('<textarea name="name" rows="8" cols="80" id="textarea-'+t.fileId+'"></textarea>'),$(".text-area textarea").first().val(t.fileContent),$("#bookmark-"+t.fileId).children(".bookmark__close").click(window.bookmark.onBookmarkCloseClick),$("#bookmark-"+t.fileId).click(window.bookmark.onBookmarkClick),$(".text-area textarea").keyup(window.util.onTextareaInput),window.menuAccyAttrs.menuForFile(t.fileId,o),$(".viewing__button").attr("disabled","true")},i=function(e,t){t?window.onError.errorMessageShow(t):window.onError.errorMessageShow("Содержимое файла не загружено");var o=e.replace("../jsons/","").replace(".json","");$("#"+o).addClass("errorFile"),$("#"+o).removeAttr("data-opened"),$(".viewing__button").attr("disabled","true")};window.fileview={fileView:function(e){var t="../jsons/"+e+".json";window.server.download(t,o,i)}}}(window.jQuery),function(){"use strict";window.menuAccyAttrs={menuForFile:function(e,t){$("button.js-file-delete").removeAttr("disabled"),$("button.js-rename").removeAttr("disabled"),$(".js-file-download").attr("href","files/"+t),$(".js-file-download").removeClass("main-menu__item--disabled"),$("button.js-folder-delete").attr("disabled","true"),$(".deleting-file__text span").html(t),$(".deleting-file input").val(e),$(".renaming__text span").html(t)},menuForFolder:function(e,t){$("button.js-rename").removeAttr("disabled"),$("button.js-folder-delete").removeAttr("disabled"),$(".js-file-download").removeAttr("href"),$(".js-file-download").addClass("main-menu__item--disabled"),$("button.js-file-delete").attr("disabled","true"),$(".deleting-folder__text span").html(t),$(".renaming__text span").html(t)},menuZeroState:function(){$("button.js-file-delete").prop("disabled",!0),$("button.js-rename").prop("disabled",!0),$(".js-file-download").removeAttr("href"),$(".js-file-download").addClass("main-menu__item--disabled"),$("button.js-folder-delete").attr("disabled","true"),$(".deleting-file__text span").html(""),$(".deleting-file input").val(""),$(".renaming__text span").html(""),$(".deleting-folder__text span").html("")}}}(window.jQuery),function(){"use strict";function t(){$(".deleting-file").addClass("to-delete"),$(".js-deleting-file__popup-button").unbind(),$(".js-deleting-file__popup-close").unbind()}function o(){$(".deleting-folder").addClass("to-delete"),$(".js-deleting-folder__popup-button").unbind(),$(".js-deleting-folder__popup-close").unbind()}function i(){$(".renaming").addClass("to-delete"),$(".js-renaming__validation-message").addClass("to-delete"),$(".js-renaming__popup-button").attr("disabled","true"),$(".js-renaming__popup-input").val(""),$(".js-renaming__popup-close").unbind(),$(".js-renaming__popup-input").unbind()}function a(){$(".creation").addClass("to-delete"),$(".js-validation-message").addClass("to-delete"),$(".js-popup-button-create").attr("disabled","true"),$(".js-popup-input-create").val(""),$(".js-popup-close-creation").unbind("click",a)}$(".js-folder-create").click(function(){$(".creation").removeClass("to-delete"),$(".js-popup-close-creation").click(a),$("body").keydown(function(e){"Escape"===e.key&&a()}),$(".js-popup-input-create").on("input",function(){$(".js-popup-button-create").removeAttr("disabled"),$(".js-validation-message").addClass("to-delete"),""===$(this).val()&&$(".js-popup-button-create").attr("disabled","true")}),$(".js-popup-input-create").on("change",function(){var e=$(this).val();window.validation.folderNameValidation(e)?a():($(".js-validation-message").html("не правильно, пишите на латинице"),$(".js-validation-message").removeClass("to-delete"))})}),$(".js-folder-delete").click(function(){$(".deleting-folder").removeClass("to-delete"),$(".js-deleting-folder__popup-button").click(o),$(".js-deleting-folder__popup-close").click(o),$("body").keydown(function(e){"Escape"===e.key&&o()})}),$(".js-file-delete").click(function(){$(".deleting-file").removeClass("to-delete"),$(".js-deleting-file__popup-button").click(window.deleting.fileDeleting),$(".js-deleting-file__popup-close").click(t),$("body").keydown(function(e){"Escape"===e.key&&t()})}),$(".js-rename").click(function(){$(".renaming").removeClass("to-delete"),$(".js-renaming__popup-close").click(i),$("body").keydown(function(e){"Escape"===e.key&&i()}),$(".js-renaming__popup-input").on("input",function(){$(".js-renaming__popup-button").removeAttr("disabled"),$(".js-renaming__validation-message").addClass("to-delete"),""===$(this).val()&&$(".js-renaming__popup-button").attr("disabled","true")}),$(".js-renaming__popup-input").on("change",function(){var e=$(this).val();window.validation.fileNameValidation(e)?i():($(".js-renaming__validation-message").html("имя должно быть на латинице"),$(".js-renaming__validation-message").removeClass("to-delete"))})}),window.menuEvents={closePopupDeletingFile:t}}(window.jQuery),window.jQuery,function(){"use strict";function i(e,t){var o=e.replace("../jsons/tree-","").replace(".json","");$("#"+o).after('<ul id="sublist-'+o+'" class="tree__sublist"></ul>');for(var i=0;i<t.length;i++)if(t[i].hasOwnProperty("folderId"))"empty"==t[i].empty?$("#sublist-"+o).append('<li><p id="'+t[i].folderId+'" class="tree__folders-atom--empty">'+t[i].folderName+"</p></li>"):$("#sublist-"+o).append('<li><p id="'+t[i].folderId+'" class="tree__folders-atom tree__folders-atom--closed">'+t[i].folderName+"</p></li>");else if(t[i].hasOwnProperty("fileId")){$("#sublist-"+o).append('<li><p id="'+t[i].fileId+'" class="tree__files-atom"><span></span>'+t[i].fileName+"."+t[i].fileType+"</p></li>");var a='url("'+t[i].fileIcon+'")';$("#"+t[i].fileId+" span").css("background-image",a),$("#"+t[i].fileId).after('<p class="tree__files-description to-delete">'+t[i].fileDescription+"</p>")}else window.onError.errorMessageShow("загрузили непонятно что...");$(".tree__files-atom").click(window.onAtomClick.onFileClick),$(".tree__folders-atom--empty").click(window.onAtomClick.onFolderEmptyClick),$("#sublist-"+o+" .tree__folders-atom").click(window.onAtomClick.onFolderClick),$(".tree__files-atom").hover(window.tooltip.tooltipShow,window.tooltip.tooltipHide)}function a(e,t){t?window.onError.errorMessageShow(t):window.onError.errorMessageShow("Ошибка загрузки данных о вложенных файлах и папках")}window.onAtomClick={onFileClick:function(){window.util.noMarker(),$(this).addClass("tree__atom-current");var e=$(this).attr("id");$(this).html(),$(this).attr("data-opened")?$(".bookmarks__item").filter("#bookmark-"+e).trigger("click"):($(this).attr("data-opened","opened"),window.fileview.fileView(this.id))},onFolderEmptyClick:function(){$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__files-atom").removeClass("tree__atom-current"),$(this).addClass("tree__atom-current");var e=$(this).attr("id"),t=$(this).html();window.menuAccyAttrs.menuForFolder(e,t)},onFolderClick:function(){$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current"),$(".tree__files-atom").removeClass("tree__atom-current"),$(this).addClass("tree__atom-current");var e=$(this).attr("id"),t=$(this).html();if(window.menuAccyAttrs.menuForFolder(e,t),$(this).hasClass("tree__folders-atom--closed"))if($(this).removeClass("tree__folders-atom--closed"),$(this).addClass("tree__folders-atom--opened"),$("ul#sublist-"+e).length)$("ul#sublist-"+e).removeClass("to-delete");else{var o="../jsons/tree-"+$(this).attr("id")+".json";window.server.download(o,i,a)}else $(this).removeClass("tree__folders-atom--opened"),$(this).addClass("tree__folders-atom--closed"),$("ul#sublist-"+e).addClass("to-delete")}}}(window.jQuery),function(){"use strict";window.onError={errorMessageShow:function(e){$(".message").removeClass("to-delete"),$(".message__dynamic-text").html(e),$(".js-popup-button-message").click(function(){$(".message__dynamic-text").html(""),$(".message").addClass("to-delete")})}}}(window.jQuery),window.server={download:function(e,t,o){var i=new XMLHttpRequest;i.responseType="json",i.open("GET",e),i.addEventListener("load",function(){200===i.status?t(e,i.response):o(e,"")}),i.addEventListener("error",function(){o(e,"Произошла ошибка соединения")}),i.addEventListener("timeout",function(){o(e,"Запрос не успел выполниться за "+i.timeout/1e3+"с")}),i.timeout=4e3,i.send()},upload:function(e,t,o){var i=new XMLHttpRequest;i.responseType="json",i.addEventListener("load",function(){200===i.status?t():o("Статус ответа: "+i.status+" "+i.statusText)}),i.addEventListener("error",function(){o()}),i.addEventListener("timeout",function(){o()}),i.timeout=4e3,i.open("POST",window.consts.URL_POST),i.send(e)}},function(){"use strict";window.tooltip={tooltipShow:function(e){var t=e.pageX-$(this).offset().left,o=e.pageY-$(this).offset().top;$(this).next().css({top:o,left:t}),$(this).next().removeClass("to-delete"),$(".tree__files-atom").mousemove(function(e){var t=e.pageX-$(this).offset().left,o=e.pageY-$(this).offset().top;$(this).next().css({top:o,left:t})})},tooltipHide:function(){$(this).next().addClass("to-delete")}}}(window.jQuery),function(){"use strict";function e(e,t){for(var o=0;o<t.length;o++)"empty"==t[o].empty?$(".tree__list").append('<li><p id="'+t[o].folderID+'" class="tree__folders-atom--empty">'+t[o].folderName+"</p></li>"):$(".tree__list").append('<li><p id="'+t[o].folderID+'" class="tree__folders-atom tree__folders-atom--closed">'+t[o].folderName+"</p></li>");$(".tree__folders-atom").click(window.onAtomClick.onFolderClick),$(".tree__folders-atom--empty").click(window.onAtomClick.onFolderEmptyClick)}function t(e,t){t?window.onError.errorMessageShow(t):window.onError.errorMessageShow("Ошибка загрузки данных о папках первого уровня")}$(window).load(function(){window.server.download("../jsons/tree0.json",e,t)})}(window.jQuery),function(){"use strict";$("#upload-file").change(function(){var e=new FileReader;e.onload=function(e){$(".js-bookmarks__item--zero").addClass("to-delete"),$(".bookmarks__item").removeClass("bookmarks__item--current"),$(".bookmarks__list").prepend('<li class="bookmarks__item bookmarks__item--current" id="bookmark-new"><span>Новый файл</span><button class="bookmark__close"></button></li>'),$(".text-area textarea").addClass("to-delete"),$(".text-area").prepend('<textarea id="textarea-new" name="name" rows="8" cols="80"></textarea>'),$(".text-area textarea").first().val(e.target.result),$("#bookmark-new").children(".bookmark__close").click(window.bookmark.bookmarkClose),$("#bookmark-new").click(window.bookmark.bookmarkToggle),window.menuAccyAttrs.menuZeroState()},e.readAsText($("#upload-file")[0].files[0],"UTF-8")})}(window.jQuery),function(){"use strict";window.util={noMarker:function(){$(".tree__files-atom").removeClass("tree__atom-current"),$(".tree__folders-atom").removeClass("tree__atom-current"),$(".tree__folders-atom--empty").removeClass("tree__atom-current")},onTextareaInput:function(e){var t=$(this).attr("id").replace("textarea-","");$(".bookmarks__item").filter("#bookmark-"+t).addClass("bookmarks__item--changed"),$(".viewing__button").removeAttr("disabled"),$(".viewing__button").click(window.util.onSaveButtonClick)},onSaveButtonClick:function(){var e=$(".bookmarks__item").filter(".bookmarks__item--current").html();window.animation.animatedMessageAppearance("файл "+e+" сохранен"),$(".bookmarks__item").filter(".bookmarks__item--current").removeClass("bookmarks__item--changed"),$(".viewing__button").attr("disabled","true"),$(".viewing__button").unbind("")},doYouWantToSave:function(e,t){$(".message-tosave__text-1").html("Файл "+t+" был изменен."),$(".message-tosave__text-2").html("Сохранить изменения?"),$(".message-tosave").removeClass("to-delete"),$(".js-tosave-button-esc").click(function(){return $(".message-tosave").addClass("to-delete"),console.log("esc"),"esc"}),$(".js-tosave-button-no").click(function(){return $(".message-tosave").addClass("to-delete"),console.log("no"),"no"}),$(".js-tosave-button-yes").click(function(){return $(".message-tosave").addClass("to-delete"),console.log("yes"),"yes"})},viewAreaClose:function(e){if(console.log("fileId in viewAreaClose = "+e),$(".bookmarks__item").filter("#bookmark-"+e).remove(),$(".text-area textarea").filter("#textarea-"+e).remove(),$(".tree__files-atom").filter("#"+e).removeAttr("data-opened"),window.util.noMarker(),1==$(".bookmarks__item").length)$(".js-bookmarks__item--zero").removeClass("to-delete"),$(".js-bookmarks__item--zero").removeClass("bookmarks__item--current"),$(".js-bookmarks__item--zero button").remove(),$(".js-text-area--zero").removeClass("to-delete"),window.menuAccyAttrs.menuZeroState(),$(".viewing__button").attr("disabled","true"),$(".viewing__button").unbind("");else{$(".bookmarks__item").removeClass("bookmarks__item--current"),$(".bookmarks__item").first().addClass("bookmarks__item--current");var t=$(".bookmarks__item").first().attr("id").replace("bookmark-",""),o=$(".bookmarks__item").first().children("span").html();$(".text-area textarea").addClass("to-delete"),$(".text-area textarea").filter("#textarea-"+t).removeClass("to-delete"),$(".tree__files-atom").filter("#"+t).addClass("tree__atom-current"),window.menuAccyAttrs.menuForFile(t,o),$("#bookmark-"+e).children(".bookmark__close").unbind(""),$(".bookmarks__item").first().hasClass("bookmarks__item--changed")?($(".viewing__button").removeAttr("disabled"),$(".viewing__button").click(window.util.onSaveButtonClick)):($(".viewing__button").attr("disabled","true"),$(".viewing__button").unbind(""))}}}}(window.jQuery),function(){"use strict";window.validation={fileNameValidation:function(e){return!/[А-Яа-я]/.test(e)},folderNameValidation:function(e){return!/[А-Яа-я]/.test(e)}}}(window.jQuery);
//# sourceMappingURL=script.min.js.map
